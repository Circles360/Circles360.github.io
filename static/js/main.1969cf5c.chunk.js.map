{"version":3,"sources":["components/checkprerequisites.js","components/getelement.js","components/degreeplanner-course.jsx","components/degreeplanner-term.jsx","components/degreeplanner.js","components/customnode1.js","components/customnode2.js","components/headernode1.js","components/hoverinfo.js","components/hoverprerequisites.js","components/unhoverprerequisites.js","components/dropdownDegrees.js","components/sidebar-modal.js","components/tutorialnode1.js","components/tutorialnode2.js","components/highlightelements.js","components/selectnode.js","components/unselectnode.js","components/getselectable.js","components/exclusionswap.js","components/unselectunconnected.js","components/interactivetutorial.js","components/tutorial-modal.js","components/sidebar.js","components/dropdownsearch.js","components/initialisation/dropdownSearchInit.js","components/initialisation/selectableInit.js","components/initialisation/hiddenInit.js","components/initialisation/additionalSearchInit.js","components/initialisation/coursesInit.js","maps/EngineeringHonoursSoftware/map.js","components/interactivetutorialmain.js","maps/Homepage/map.js","maps/ComputerScienceCOMPA1/map.js","maps/ComputerScienceCOMPA1ACCTA2/map.js","maps/ComputerScienceCOMPA1FINSA2/map.js","maps/ComputerScienceCOMPA1MARKA2/map.js","maps/ComputerScienceCOMPA1INFSA2/map.js","maps/ComputerScienceCOMPA1PSYCM2/map.js","App.js","serviceWorker.js","index.js","assets/refresh.svg"],"names":["checkPrerequisites","node","elements","selectedNodes","data","conditions","units_required","level_for_units_required","checkPrerequisiteUnitsLevel","prerequisites","prereqs_executable","checkPrerequisiteUnits","condition","replace","match","hasOwnProperty","eval","total","target","Object","keys","selected","id","getElement","units","core_year","courseType","substr","concat","selectedList","takenNode","elementsData","e","Course","Container","draggableId","this","props","course","index","provided","ref","innerRef","draggableProps","dragHandleProps","Label","style","margin","display","flexGrow","content","courseId","marginLeft","alignSelf","rel","href","Icon","name","placeholder","React","Component","checkTermAvailability","termId","term","substring","allCourses","termsAvailable","includes","placeholderTerms","checkValidCourses","courseIds","Term","droppableId","snapshot","Segment","backgroundColor","isDraggingOver","draggingOverWith","transition","Header","as","title","filter","c","reduce","colour","color","floating","showUnits","droppableProps","minHeight","courses","map","key","REGEX_COURSE_CODE","mapTermIds","mapTermFull","getCourses","selectedCourses","coursesJSON","forEach","terms","course_name","generateTerms","yearId","TSKey","T1Key","T2Key","T3Key","addPriority","priority","unlocksCourse","prereq","unlocks","push","prioritiseCourses","level","Number","unitsRequired","t","length","prioritised","values","sort","a","b","noUnitsRequirements","hasUnitsRequirements","runningTotalUnits","newPrioritised","shift","checkPrereqsMet","termPlan","prereqsExecutable","coursesTaken","addCourseToPlan","courseUnits","populateTerms","maxYears","prioritisedCourses","year","makePlan","plan","generatePlanScaffold","years","toString","DegreePlanner","state","program","specialisations","onDragEnd","result","destination","source","sourceYear","start","destinationYear","finish","startCourseIds","Array","from","splice","newStart","finishCourseIds","newFinish","newState","setState","newCourseIds","newTerm","getConsiderationMessages","programId","programUnits","programsJSON","considerationMessages","getCourseLink","getCoursesInLevel","rawList","flat","allCourseIds","courseList","totalUnits","Item","degree","coursesInDegree","levelName","specialisationsJSON","structure","specialisationId","degreeUnitsRequired","degreeUnitsTaken","coreCourses","levelCourses","selectedUnits","replaceAll","join","marginBottom","positive","List","error","textAlign","marginTop","onDragStart","columns","termOrder","Column","fluid","height","padding","zIndex","pointerEvents","opacity","top","memo","type","position","course_code","iconSize","width","bottom","src","Refresh","alt","degree_name","left","maxWidth","HoverInfo","raised","raw","exclusions","hoverPrerequisites","selectedEdges","selectableNodes","potentialEdges","hoverEdges","prereqQueue","current","unhoverPrerequisites","edge","courseOptions","programOptions","code","degrees_involved","majors","honours","replacement","spec","getMajors","minors","console","log","getMinors","DropdownDegrees","majorOptions","minorOptions","disabledPrimary","disabledSecondary","hiddenPrimary","hiddenSecondary","valProgram","valPrimary","valSecondary","phPrimary","phSecondary","chooseProgram","value","choosePrimary","chooseSecondary","minor","getLink","window","location","split","supported","isDisabled","getMessage","Message","info","link","currentURL","slice","indexOf","Grid","centered","Row","Dropdown","selection","search","onChange","options","enabled","disabled","visibility","clearable","Button","onClick","exampleReducer","action","open","dimmer","Error","SideBarModal","useReducer","undefined","dispatch","size","Modal","closeIcon","onClose","instructions","selectedEdgeAnimated","stroke","strokeWidth","selectedEdgeStatic","hoverEdge","potentialHoverEdge","potentialEdge","unselectedEdge","highlightElements","hiddenNodes","hiddenEdges","hideMap","isEdge","isHidden","animated","textSelectedColour","background","selectedColour","textColour","selectableColour","selectNode","unlockCourse","unselectNode","unselectQueue","getSelectable","analyseNodesKeys","isNode","exclusionSwap","edges","exclusionGroups","group","prevCourse","curCourse","curNode","edgesList","getConnectedEdges","newEdgesList","edgesIds","newEdgesIds","newEdge","checkedEdges","newEdgeId","sourceNode","targetNode","unselectUnconnected","selectedNode","trueSelectedNodes","selectedUnlockQueue","curUnlock","selectedUnitsNode","checkPrequisiteUnits","selectable","selectableNode","course_level","corequisites","other","equivalents","x","y","cursor","alignItems","justifyContent","fontSize","fontWeight","borderRadius","border","boxShadow","edgesData","exclusionNodes","nodeTypes","tutorial1","TutorialNode1","tutorial2","TutorialNode2","InteractiveTutorial","useState","setElements","clickCount","singleClickTimer","selectUnselect","element","onLoad","reactFlowInstance","exclusion","last","pop","fitView","nodesConnectable","onElementClick","event","setTimeout","clearTimeout","toggleExclusion","paneMoveable","selectNodesOnDrag","elementsSelectable","nodesDraggable","onNodeMouseEnter","onNodeMouseLeave","TutorialModal","getSelectedCourses","specialisationCodes","specId","levels","minUnits","unitsTaken","horizontal","Sidebar","paddingLeft","paddingRight","flexDirection","Divider","basic","selector","Content","visible","hidden","DropdownSearch","setSearch","setInitTransform","useStoreActions","actions","clickDone","searchElements","toggleHidden","innerWidth","innerHeight","k","exclusionNode","searchNodeOptions","prop","onKeyPress","icon","dropdownSearchInit","dropdownSearch","text","selectableInit","nodesData","hiddenInit","additionalSearchInit","dataJSON","searchAdditionalOptions","nodesOnFlowchart","coursesInit","rawCoursesJSON","specialisation","require","updatedCoursesJSON","custom1","CustomNode1","custom2","CustomNode2","header1","HeaderNode1","layoutStyle","overflowX","overflowY","BESengah","hoverDisplay","hoverText","setHoverText","hoverNode","setHoverNode","layout","setLayout","additionalCourses","setAdditionalCourses","useRef","positon","divided","onMouseEnter","onMouseLeave","instance","setTransform","zoom","minZoom","Checkbox","toggle","checked","label","right","Subheader","multiple","InteractiveTutorialMain","containerStyle","lineHeight","getButton","circular","Homepage","transform","paddingTop","warning","ComputerScienceCOMPA1","ComputerScienceCOMPA1ACCTA2","ComputerScienceCOMPA1FINSA2","ComputerScienceCOMPA1MARKA2","ComputerScienceCOMPA1INFSA2","ComputerScienceCOMPA1PSYCM2","App","basename","exact","path","component","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message","module","exports"],"mappings":"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","file":"static/js/main.1969cf5c.chunk.js","sourcesContent":["// Returns true if all prerequisites are met for a given node\r\n// Returns false if prerequisites are not met for a given node\r\n// Will only analyse targets of potential edges\r\n\r\nimport getElement from './getelement.js';\r\n\r\n// NOTE: Assumes that source of potential edges are always selected\r\nexport default function checkPrerequisites(node, elements, selectedNodes) {\r\n    if (node.data.conditions.units_required !== null && node.data.conditions.level_for_units_required !== null) {\r\n        // Get the type of course this is\r\n        return(checkPrerequisiteUnitsLevel(node, elements, selectedNodes));\r\n    }\r\n\r\n    if (node.data.conditions.prerequisites !== null && node.data.conditions.prereqs_executable !== null) {\r\n        // Evaluate the condition\r\n        //console.log(\"HERE\");\r\n        //console.log(node.data.conditions.prereqs_executable);\r\n\r\n        // Check if units have been met if it has a unit requirement\r\n        if (node.data.conditions.units_required !== null) {\r\n            if (! checkPrerequisiteUnits(node, elements, selectedNodes)) return false;\r\n            // Remember we also have to check its prerequisites!!!\r\n        }\r\n\r\n        var condition = node.data.conditions.prereqs_executable;\r\n        //console.log(condition);\r\n        condition = condition.replace(/[A-Z]{4}[A-Z0-9]+/gi, function(match) {\r\n            //console.log(match);\r\n            if (selectedNodes.hasOwnProperty(match)) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n        // eslint-disable-next-line\r\n        if (eval(condition)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    return(checkPrerequisiteUnits(node, elements, selectedNodes));\r\n\r\n    // TODO: Check for corerequsiites and exclusion courses as well\r\n    // TODO: Check for completion of units and core_year\r\n\r\n    // Check if these nodes are enough to satisfy prerequisites\r\n    // Get the prerequisite condition and replace courses by 1 if they have been\r\n    // selected and 0 if they have not.\r\n\r\n}\r\n\r\n// Perform prerequisite check for units given the node to check, elements and all\r\n// the selected nodes. Returns true/false\r\nexport function checkPrerequisiteUnits(node, elements, selectedNodes) {\r\n    if (node.data.conditions.units_required !== null) {\r\n        if (node.data.conditions.level_for_units_required === null) {\r\n            // See if we meet the total for this course\r\n            var total = 0;\r\n            const target = node.data.conditions.units_required;\r\n            // console.log(selectedNodes);\r\n            const selectedList = Object.keys(selectedNodes);\r\n            for (const selected of selectedList) {\r\n                if (selected === node.id) continue; // The node can't include itself\r\n                const takenNode = getElement(selected, elements);\r\n                total += takenNode.data.units;\r\n            }\r\n\r\n            if (total >= target) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            // This should have been dealt with in the main function\r\n            // Only check specific level courses\r\n            // We will put it here anyways because unselectconnected imports this function alone\r\n            return(checkPrerequisiteUnitsLevel(node, elements, selectedNodes));\r\n        }\r\n    } else if (node.data.conditions.core_year !== null) {\r\n        // NOTE: Hardcoded this for comp courses in sengah\r\n        return true;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n// Perform prerequisite check for nodes which require X units of Y level courses\r\nfunction checkPrerequisiteUnitsLevel(node, elements, selectedNodes) {\r\n    // Determine the type of course\r\n    var courseType = node.id.substr(0, 4);\r\n    courseType = courseType.concat(node.data.conditions.level_for_units_required);\r\n\r\n    var total = 0;\r\n    const target = node.data.conditions.units_required;\r\n    const selectedList = Object.keys(selectedNodes);\r\n    for (const selected of selectedList) {\r\n        if (selected.substr(0, 5) !== courseType) continue; // Not the right course type\r\n        if (selected === node.id) continue; // The node can't include itself\r\n        const takenNode = getElement(selected, elements);\r\n        total += takenNode.data.units;\r\n    }\r\n\r\n    if (total >= target) {\r\n        // If it has conditions, check the conditions\r\n        if (node.data.conditions.prerequisites !== null && node.data.conditions.prereqs_executable !== null) {\r\n            // Evaluate the condition\r\n\r\n            var condition = node.data.conditions.prereqs_executable;\r\n            condition = condition.replace(/[A-Z]{4}[A-Z0-9]+/gi, function(match) {\r\n                if (selectedNodes.hasOwnProperty(match)) {\r\n                    return 1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            });\r\n            // eslint-disable-next-line\r\n            if (eval(condition)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return true;\r\n        }\r\n    } else {\r\n        return false;\r\n    }\r\n    \r\n}","// Given an id, returns the element\r\nconst getElement = (id, elementsData) => {\r\n    //console.log(\"GET ELEMENT OF \" + id);\r\n    for (var e of elementsData) {\r\n        if (e.id === id) {\r\n            return e;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport default getElement;","import React from \"react\";\r\nimport { Label, Container, Icon} from 'semantic-ui-react'\r\n\r\nimport { Draggable } from \"react-beautiful-dnd\"\r\n\r\nconst getCourseLink = (courseId) => {\r\n    const handbookVersion = 2021;\r\n    return <a style={{marginLeft: \"5px\", alignSelf: \"flex-start\"}} target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.handbook.unsw.edu.au/undergraduate/courses/${handbookVersion}/${courseId}`}><Icon name=\"external share\"/></a>;\r\n}\r\n\r\nexport default class Course extends React.Component {\r\n    render () {\r\n        return (\r\n            <Container>\r\n                <Draggable draggableId={this.props.course.id} index={this.props.index}>\r\n                    {provided => (\r\n                        <div>\r\n                            <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\r\n                                <Label style={{margin: \"5px\", display: \"flex\"}}>\r\n                                    <span style={{flexGrow: \"1\"}}>\r\n                                        {this.props.course.content}\r\n                                    </span>\r\n                                    {getCourseLink(this.props.course.id)}\r\n                                </Label>\r\n                            </div>\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Draggable>\r\n            </Container>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Container, Segment, Header, Label } from 'semantic-ui-react'\r\n\r\nimport Course from \"./degreeplanner-course\"\r\n\r\nimport { Droppable } from \"react-beautiful-dnd\"\r\n\r\nconst SUCCESS = \"#FCFFF5\";\r\nconst ERROR = \"#FFF6F6\";\r\nconst UNKNOWN = \"#FFFAF3\"\r\n\r\nconst checkTermAvailability = (props, courseId) => {\r\n    const termId = props.term.id.substring(1, 3);\r\n    const termAvailability = props.allCourses[courseId].termsAvailable;\r\n\r\n    // return props.allCourses[courseId].placeholderTerms\r\n    //     ? UNKNOWN\r\n    //     : termAvailability.includes(termId)\r\n    //     ? SUCCESS\r\n    //     : ERROR;\r\n    return termAvailability.includes(termId)\r\n        ? props.allCourses[courseId].placeholderTerms\r\n            ? UNKNOWN\r\n            : SUCCESS\r\n        : ERROR\r\n}\r\n\r\nconst checkValidCourses = (props) => {\r\n    const termId = props.term.id.substring(1, 3);\r\n\r\n    for (const courseId of props.term.courseIds) {\r\n        if (!props.allCourses[courseId].termsAvailable.includes(termId)) return ERROR;\r\n        if (props.allCourses[courseId].placeholderTerms) return UNKNOWN;\r\n    }\r\n    return \"white\"\r\n}\r\n\r\nconst showUnits = (props) => {\r\n    const total = props.term.courseIds.filter(c => props.allCourses[c]).reduce((total, courseId) => total + props.allCourses[courseId].units, 0);\r\n    const partTime = 12;\r\n    const fullTime = 18;\r\n\r\n    let colour = \"\"\r\n    if (total === 0) {\r\n        colour = \"grey\";\r\n    } else if (total < partTime) {\r\n        colour = \"orange\";\r\n    } else if (total < fullTime) {\r\n        colour = \"blue\";\r\n    } else if (total === fullTime) {\r\n        colour = \"teal\";\r\n    } else {\r\n        colour = \"red\";\r\n    }\r\n\r\n    return <Label color={colour} floating style={{transition: \"0.2s ease\"}}>{total}</Label>;\r\n}\r\n\r\nexport default class Term extends React.Component {\r\n    render () {\r\n        return (\r\n            <Container>\r\n                <Droppable droppableId={this.props.term.id}>\r\n                    {(provided, snapshot) => (\r\n                        <Segment style={{backgroundColor: snapshot.isDraggingOver ? checkTermAvailability(this.props, snapshot.draggingOverWith) : checkValidCourses(this.props), transition: \"0.2s ease\"}}>\r\n                            <Header as=\"h4\">{this.props.term.title}</Header>\r\n                            {showUnits(this.props)}\r\n                            {/* {getTermTitle(this.props)} */}\r\n                            <div ref={provided.innerRef} {...provided.droppableProps} style={{minHeight: \"150px\"}}>\r\n                                {this.props.courses.map((course, index) => <Course key={course.id} course={course} index={index} />)}\r\n                                {provided.placeholder}\r\n                            </div>\r\n                        </Segment>\r\n                    )}\r\n                </Droppable>\r\n            </Container>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { Container, Segment, Header, Message, Grid } from 'semantic-ui-react'\r\n\r\nimport programsJSON from \"../webscraper/programs.json\"\r\nimport specialisationsJSON from \"../webscraper/specialisations.json\"\r\n\r\nimport { DragDropContext } from \"react-beautiful-dnd\"\r\nimport Term from \"./degreeplanner-term\"\r\n\r\nconst REGEX_COURSE_CODE = /[A-Z]{4}\\d{4}/g;\r\n\r\nconst mapTermIds = (term) => {\r\n    if (term === \"Summer Term\") return \"TS\";\r\n    if (term === \"Term 1\") return \"T1\";\r\n    if (term === \"Term 2\") return \"T2\";\r\n    if (term === \"Term 3\") return \"T3\";\r\n    return;\r\n}\r\n\r\nconst mapTermFull = (term) => {\r\n    if (term === \"TS\") return \"Summer Term\";\r\n    if (term === \"T1\") return \"Term 1\";\r\n    if (term === \"T2\") return \"Term 2\";\r\n    if (term === \"T3\") return \"Term 3\";\r\n}\r\n\r\nconst getCourses = (selectedCourses, coursesJSON) => {\r\n    const courses = {}\r\n    selectedCourses.forEach(c => {\r\n        if (!(c in coursesJSON)) return;\r\n\r\n        let termsAvailable;\r\n        if (!coursesJSON[c].terms) {\r\n            termsAvailable = [\"TS\", \"T1\", \"T2\", \"T3\"];\r\n        } else {\r\n            termsAvailable = coursesJSON[c].terms.map(term => mapTermIds(term));\r\n        }\r\n\r\n        courses[c] = {\r\n            id: c,\r\n            content: `${c} - ${coursesJSON[c].course_name}`,\r\n            termsAvailable: termsAvailable,\r\n            placeholderTerms: !coursesJSON[c].terms,\r\n            units: coursesJSON[c].units\r\n        }\r\n    })\r\n\r\n    return courses\r\n}\r\n\r\nconst generateTerms = (yearId) => {\r\n    const terms = {}\r\n\r\n    // Terms have id of <YEAR>T<TERM TYPE> eg: 1TS is 1st Year, Summer Term\r\n\r\n    const TSKey = `${yearId}TS`;\r\n    const T1Key = `${yearId}T1`;\r\n    const T2Key = `${yearId}T2`;\r\n    const T3Key = `${yearId}T3`;\r\n    terms[\"termOrder\"] = [TSKey, T1Key, T2Key, T3Key];\r\n\r\n    terms[TSKey] = {\r\n        id: TSKey,\r\n        title: `Year ${yearId} - Summer Term`,\r\n        courseIds: []\r\n    }\r\n\r\n    terms[T1Key] = {\r\n        id: T1Key,\r\n        title: `Year ${yearId} - Term One`,\r\n        courseIds: []\r\n    }\r\n\r\n    terms[T2Key] = {\r\n        id: T2Key,\r\n        title: `Year ${yearId} - Term Two`,\r\n        courseIds: []\r\n    }\r\n\r\n    terms[T3Key] = {\r\n        id: T3Key,\r\n        title: `Year ${yearId} - Term Three`,\r\n        courseIds: []\r\n    }\r\n\r\n    return terms;\r\n}\r\n\r\nconst addPriority = (priority, courseId, unlocksCourse, coursesJSON) => {\r\n    if (!(courseId in coursesJSON)) return priority;\r\n    if (!coursesJSON[courseId].conditions.prerequisites) return priority;\r\n\r\n    for (const prereq of coursesJSON[courseId].conditions.prerequisites) {\r\n        if (!(prereq in priority)) continue;\r\n        if (courseId === prereq) continue;\r\n\r\n        priority[prereq].unlocks.push(unlocksCourse);\r\n        priority = addPriority(priority, prereq, unlocksCourse, coursesJSON);\r\n    }\r\n\r\n    return priority;\r\n}\r\n\r\nconst prioritiseCourses = (selectedCourses, coursesJSON) => {\r\n    // Initiate priorities\r\n    var priority = {};\r\n    for (const courseId of selectedCourses) {\r\n        if (!(courseId in coursesJSON)) continue\r\n\r\n        priority[courseId] = {\r\n            courseId: courseId,\r\n            level: Number(courseId[4]),\r\n            unlocks: [],\r\n            unitsRequired: coursesJSON[courseId].conditions.units_required ? coursesJSON[courseId].conditions.units_required : 0,\r\n            termsAvailable: coursesJSON[courseId].terms ? coursesJSON[courseId].terms.filter(t => t !== \"Summer Term\").length : 0\r\n        }\r\n    }\r\n\r\n    // Calculate priorities\r\n    for (const courseId of selectedCourses) {\r\n        priority = addPriority(priority, courseId, courseId, coursesJSON);\r\n    }\r\n\r\n    // Sort keys of priority into array to give into prioritised\r\n    const prioritised = Object.values(priority);\r\n\r\n    prioritised.sort((a, b) => {\r\n        // Sort by:\r\n        // 1. Level (ASC)\r\n        // 2. Unlocks (DESC)\r\n        // 3. Terms Available (ASC)\r\n\r\n        if (a.level === b.level) {\r\n            if (a.unlocks.length === b.unlocks.length) {\r\n                return a.termsAvailable - b.termsAvailable; // Ascending\r\n            }\r\n            return b.unlocks.length - a.unlocks.length; // Descending\r\n        }\r\n        return a.level - b.level; // Ascending\r\n    });\r\n\r\n    // Then push all courses that have unit requirements back into the queue until they have enough courses in front of them.\r\n\r\n    const noUnitsRequirements = prioritised.filter(c => !c.unitsRequired);\r\n    const hasUnitsRequirements = prioritised.filter(c => c.unitsRequired).sort((a, b) => {\r\n        return a.unitsRequired - b.unitsRequired;\r\n    });\r\n\r\n    let runningTotalUnits = 0;\r\n    const newPrioritised = [];\r\n\r\n    while (noUnitsRequirements.length !== 0 || hasUnitsRequirements.length !== 0) {\r\n        if (noUnitsRequirements.length === 0) {\r\n            newPrioritised.push(...hasUnitsRequirements);\r\n            break;\r\n        }\r\n\r\n        if (hasUnitsRequirements.length === 0) {\r\n            newPrioritised.push(...noUnitsRequirements);\r\n            break;\r\n        }\r\n\r\n        if (hasUnitsRequirements[0].unitsRequired <= runningTotalUnits) {\r\n            // Can push this one on\r\n            runningTotalUnits += hasUnitsRequirements[0].unitsRequired;\r\n            newPrioritised.push(hasUnitsRequirements.shift());\r\n        } else {\r\n            runningTotalUnits += noUnitsRequirements[0].unitsRequired;\r\n            newPrioritised.push(noUnitsRequirements.shift());\r\n        }\r\n    }\r\n\r\n    return newPrioritised;\r\n}\r\n\r\nconst checkPrereqsMet = (termPlan, termId, courseId, coursesJSON) => {\r\n\r\n    let runningTotalUnits = 0;\r\n    let prereqsExecutable = coursesJSON[courseId].conditions.prereqs_executable;\r\n\r\n    // Get courses taken up to termId\r\n    const coursesTaken = [];\r\n    for (const t in termPlan) {\r\n        if (t === termId) break;\r\n        coursesTaken.push(...termPlan[t].courseIds);\r\n        runningTotalUnits += termPlan[t].courseIds.reduce((total, c) => total + (c in coursesJSON ? coursesJSON[c].units : 0), 0);\r\n    }\r\n    // console.log(courseId, \"courses taken:\", coursesTaken);\r\n\r\n    if (coursesJSON[courseId].conditions.units_required) {\r\n        if (runningTotalUnits < coursesJSON[courseId].conditions.units_required) return false;\r\n    }\r\n\r\n    if (!prereqsExecutable) return true; // No executable\r\n\r\n    for (const course of coursesTaken) {\r\n        prereqsExecutable = prereqsExecutable.replace(course, \"1\");\r\n    }\r\n\r\n    prereqsExecutable = prereqsExecutable.replace(REGEX_COURSE_CODE, \"0\");\r\n\r\n    // Deal with Header nodes (e.g. COMPA1, SENGAH, etc)\r\n    prereqsExecutable = prereqsExecutable.replace(/[A-Z0-9]{6}/, \"1\");\r\n\r\n    // eslint-disable-next-line\r\n    return eval(prereqsExecutable);\r\n}\r\n\r\nconst addCourseToPlan = (termPlan, courseId, coursesJSON) => {\r\n    const maxUOC = 18;\r\n\r\n    for (const termId in termPlan) {\r\n        if (termId.includes(\"TS\")) continue;\r\n        if (termPlan[termId].units >= maxUOC) continue;\r\n\r\n        const courseUnits = coursesJSON[courseId].units;\r\n        if (termPlan[termId].units + courseUnits > maxUOC) continue;\r\n\r\n        let termsAvailable;\r\n        if (!(coursesJSON[courseId].terms)) {\r\n            termsAvailable = [\"TS\", \"T1\", \"T2\", \"T3\"];\r\n        } else {\r\n            termsAvailable = coursesJSON[courseId].terms.map(term => mapTermIds(term));\r\n        }\r\n\r\n        if (!(termsAvailable.includes(termId.substring(1, 3)))) continue;\r\n        // Need to check prerequisites have been met here\r\n        if (!checkPrereqsMet(termPlan, termId, courseId, coursesJSON)) continue;\r\n        // Add course to plan\r\n        termPlan[termId].units += coursesJSON[courseId].units;\r\n        termPlan[termId].courseIds.push(courseId);\r\n        return termPlan;\r\n    }\r\n\r\n    // Default put in Year 1 Summer Term if cannot find a good position for it.\r\n    // let termsAvailable;\r\n    // if (!(coursesJSON[courseId].terms)) {\r\n    //     termsAvailable = [\"TS\", \"T1\", \"T2\", \"T3\"];\r\n    // } else {\r\n    //     termsAvailable = coursesJSON[courseId].terms.map(term => mapTermIds(term));\r\n    // }\r\n\r\n    termPlan[\"1TS\"].units += coursesJSON[courseId].units;\r\n    termPlan[\"1TS\"].courseIds.push(courseId);\r\n    return termPlan;\r\n}\r\n\r\nconst populateTerms = (maxYears, prioritisedCourses, coursesJSON) => {\r\n    const maxTerms = 3;\r\n\r\n    const termPlan = {};\r\n    for (let year = 1; year <= maxYears; year++) {\r\n        termPlan[`${year}TS`] = {\r\n            units: 0,\r\n            courseIds: []\r\n        };\r\n        for (let term = 1; term <= maxTerms; term++) {\r\n            const termId = `${year}T${term}`;\r\n            termPlan[termId] = {\r\n                units: 0,\r\n                courseIds: []\r\n            };\r\n        }\r\n    }\r\n\r\n    // For each course in the prioritised, slot into earliest possible term\r\n    for (const course of prioritisedCourses) {\r\n        addCourseToPlan(termPlan, course.courseId, coursesJSON);\r\n    }\r\n\r\n    return termPlan;\r\n}\r\n\r\nconst makePlan = (plan, maxYears, selectedCourses, coursesJSON) => {\r\n    const prioritisedCourses = prioritiseCourses(selectedCourses, coursesJSON);\r\n\r\n    const termPlan = populateTerms(maxYears, prioritisedCourses, coursesJSON);\r\n\r\n    for (const termId in termPlan) {\r\n        const year = termId[0];\r\n        plan[year][termId].courseIds = termPlan[termId].courseIds\r\n    }\r\n\r\n    return plan;\r\n}\r\n\r\nconst generatePlanScaffold = (years, selectedCourses, coursesJSON) => {\r\n    let plan = {};\r\n\r\n    for (let year = 1; year <= years; year++) {\r\n        plan[year.toString()] = generateTerms(year)\r\n    }\r\n\r\n    plan = makePlan(plan, years, selectedCourses, coursesJSON)\r\n\r\n    return plan;\r\n}\r\n\r\nclass DegreePlanner extends React.Component {\r\n    state = {\r\n        courses: getCourses(this.props.selectedCourses, this.props.coursesJSON),\r\n        selectedCourses: this.props.selectedCourses,\r\n        plan: generatePlanScaffold(4, this.props.selectedCourses, this.props.coursesJSON),\r\n        program: this.props.program,\r\n        specialisations: this.props.specialisations\r\n    };\r\n\r\n    onDragEnd = result => {\r\n        const { destination, source, draggableId } = result;\r\n\r\n        // Null destination means label was not dragged into a droppable\r\n        if (!destination) return;\r\n\r\n        // Label was dragged into the same position\r\n        if (destination.droppableId === source.droppableId && destination.index === source.index) return;\r\n\r\n        const sourceYear = source.droppableId[0];\r\n        const start = this.state.plan[sourceYear][source.droppableId];\r\n        const destinationYear = destination.droppableId[0];\r\n        const finish = this.state.plan[destinationYear][destination.droppableId];\r\n\r\n        if (start === finish) {\r\n            const newCourseIds = Array.from(start.courseIds);\r\n            newCourseIds.splice(source.index, 1); // Remove 1 item at source.index\r\n            newCourseIds.splice(destination.index, 0, draggableId); // Insert dragggableId into destination\r\n            const newTerm = {\r\n                ...start,\r\n                courseIds: newCourseIds\r\n            };\r\n\r\n            const newState = {\r\n                ...this.state,\r\n                plan: {\r\n                    ...this.state.plan,\r\n                    [sourceYear]: {\r\n                        ...this.state.plan[sourceYear],\r\n                        [newTerm.id]: newTerm,\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.setState(newState);\r\n            return;\r\n        }\r\n\r\n        // Moving from one list to another\r\n        const startCourseIds = Array.from(start.courseIds)\r\n        startCourseIds.splice(source.index, 1);\r\n\r\n        const newStart = {\r\n            ...start,\r\n            courseIds: startCourseIds,\r\n        }\r\n\r\n        const finishCourseIds = Array.from(finish.courseIds)\r\n        finishCourseIds.splice(destination.index, 0, draggableId);\r\n\r\n        const newFinish = {\r\n            ...finish,\r\n            courseIds: finishCourseIds\r\n        }\r\n\r\n        const newState = this.state;\r\n        newState.plan[sourceYear][newStart.id] = newStart;\r\n        newState.plan[destinationYear][newFinish.id] = newFinish;\r\n\r\n        this.setState(newState);\r\n    }\r\n\r\n    getConsiderationMessages = (state) => {\r\n        const plan = state.plan;\r\n        const courses = state.courses;\r\n        const selectedCourses = state.selectedCourses;\r\n        const program = state.program;\r\n        const programUnits = programsJSON[program].units;\r\n        const specialisations = state.specialisations;\r\n\r\n        const considerationMessages = [];\r\n        const handbookVersion = 2021;\r\n\r\n        const getCourseLink = (courseId) => {\r\n            return <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.handbook.unsw.edu.au/undergraduate/courses/${handbookVersion}/${courseId}`}>{courseId}</a>;\r\n        }\r\n\r\n        const getProgramLink = (programId) => {\r\n            return <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.handbook.unsw.edu.au/undergraduate/programs/${handbookVersion}/${programId}`}>{programId} - {programsJSON[programId].name}</a>;\r\n        }\r\n\r\n        const getSpecialisationsLink = (specialisationId) => {\r\n            return <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.handbook.unsw.edu.au/undergraduate/specialisations/${handbookVersion}/${specialisationId}`}>{specialisationId} - {specialisationsJSON[specialisationId].name}</a>;\r\n        }\r\n\r\n        const getCoursesInLevel = (rawList) => {\r\n            rawList = rawList.flat().filter(c => c !== \"ANY COURSE\");\r\n            const allCourseIds = Object.keys(this.props.coursesJSON);\r\n            const courseList = [];\r\n            rawList.forEach(courseId => {\r\n                if (courseId.match(REGEX_COURSE_CODE)) {\r\n                    courseList.push(courseId);\r\n                } else if (courseId.match(/^[A-Z]{4}\\d$/)) {\r\n                    const relevantCourses = allCourseIds.filter(c => c.includes(courseId));\r\n                    relevantCourses.forEach(c => {\r\n                        if (courseList.includes(c)) return;\r\n                        courseList.push(c);\r\n                    });\r\n                }\r\n            });\r\n            return courseList;\r\n        }\r\n\r\n        let totalUnits = 0;\r\n        const termPlan = {}\r\n        for (const year in plan) {\r\n            for (const term in plan[year]) {\r\n                if (term === \"termOrder\") continue;\r\n                termPlan[term] = plan[year][term]\r\n                totalUnits += termPlan[term].courseIds.reduce((total, c) => total + (c in this.props.coursesJSON ? this.props.coursesJSON[c].units : 0), 0);\r\n            }\r\n        }\r\n\r\n        if (totalUnits < programUnits) {\r\n            considerationMessages.push(\r\n                <Message.Item>\r\n                    {getProgramLink(program)} requires {programUnits} units. You have taken {totalUnits} units.\r\n                </Message.Item>\r\n            )\r\n        }\r\n        specialisations.forEach(degree => {\r\n            const coursesInDegree = [];\r\n            for (const levelName in specialisationsJSON[degree].structure) {\r\n                const level = specialisationsJSON[degree].structure[levelName];\r\n                if (!level.courses) continue;\r\n                coursesInDegree.push(...getCoursesInLevel(level.courses))\r\n            }\r\n            const degreeUnitsRequired = specialisationsJSON[degree].units\r\n            let degreeUnitsTaken = 0;\r\n            for (const term in termPlan) {\r\n                degreeUnitsTaken += termPlan[term].courseIds.reduce((total, c) => total + ((c in this.props.coursesJSON && coursesInDegree.includes(c)) ? this.props.coursesJSON[c].units : 0), 0);\r\n            }\r\n\r\n            if (degreeUnitsTaken < degreeUnitsRequired) {\r\n                considerationMessages.push(\r\n                    <Message.Item>\r\n                        {getSpecialisationsLink(degree)} requires {degreeUnitsRequired} units. You have taken {degreeUnitsTaken} units.\r\n                    </Message.Item>\r\n                )\r\n            }\r\n        })\r\n\r\n\r\n        // Check levels for each\r\n        specialisations.forEach(degree => {\r\n            const coreCourses = []\r\n            for (const levelName in specialisationsJSON[degree].structure) {\r\n                const level = specialisationsJSON[degree].structure[levelName];\r\n                if (!level.units_required) continue;\r\n                if (level.courses.filter(c => c !== \"ANY COURSE\").length === 0) continue;\r\n                if (level.name.match(/[Cc]ore/g)) level.courses.flat().forEach(c => coreCourses.push(c));\r\n\r\n                let levelCourses = getCoursesInLevel(level.courses);\r\n                if (!level.name.match(/[Cc]ore/g)) levelCourses = levelCourses.filter(c => !coreCourses.includes(c))\r\n                const selectedInLevel = levelCourses.filter(c => selectedCourses.includes(c));\r\n                const selectedUnits = selectedInLevel.reduce((total, c) => total + (c in this.props.coursesJSON ? this.props.coursesJSON[c].units : 0), 0);\r\n\r\n                if (selectedUnits < level.units_required) {\r\n                    considerationMessages.push(\r\n                        <Message.Item>\r\n                            {degree} - {level.name} requires {level.units_required} units. You have taken {selectedUnits} units.\r\n                        </Message.Item>\r\n                    );\r\n                }\r\n            }\r\n        })\r\n\r\n        totalUnits = 0;\r\n        for (const year in plan) {\r\n            for (const term in plan[year]) {\r\n                if (term === \"termOrder\") continue;\r\n                for (const courseId of termPlan[term].courseIds) {\r\n                    const conditions = this.props.coursesJSON[courseId].conditions\r\n                    if (!conditions.units_required) continue;\r\n                    if (totalUnits < conditions.units_required) {\r\n                        considerationMessages.push(\r\n                            <Message.Item>\r\n                                {getCourseLink(courseId)} prerequisites have not been met: {conditions.units_required} UOC required.\r\n                            </Message.Item>\r\n                        )\r\n                    }\r\n                }\r\n\r\n                totalUnits += termPlan[term].courseIds.reduce((total, c) => total + (c in this.props.coursesJSON ? this.props.coursesJSON[c].units : 0), 0);\r\n            }\r\n        }\r\n\r\n        for (const year in plan) {\r\n            for (const term in plan[year]) {\r\n                if (term === \"termOrder\") continue;\r\n                for (const courseId of plan[year][term].courseIds) {\r\n                    if (!checkPrereqsMet(termPlan, term, courseId, this.props.coursesJSON)) {\r\n                        if (this.props.coursesJSON[courseId].conditions.prereqs_executable) {\r\n                            considerationMessages.push(\r\n                                <Message.Item>\r\n                                    {getCourseLink(courseId)} prerequisites have not been met: {this.props.coursesJSON[courseId].conditions.prereqs_executable\r\n                                        .replaceAll(\"|| 0 ||\", \"||\")\r\n                                        .replaceAll(\"&& 0 &&\", \"&&\")\r\n                                        .replaceAll(\"&& 0 ||\", \"||\")\r\n                                        .replaceAll(\"|| 0 &&\", \"&&\")\r\n                                        .replaceAll(\"&&\", \"and\")\r\n                                        .replaceAll(\"||\", \"or\")\r\n                                    }\r\n                                </Message.Item>\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Check terms\r\n        for (const yearId in plan) {\r\n            for (let termId in plan[yearId]) {\r\n                if (termId === \"termOrder\") continue;\r\n                const term = termId.substring(1, 3)\r\n                for (const courseId of plan[yearId][termId].courseIds) {\r\n                    // if (!courses[courseId].termsAvailable) {\r\n                    if (!courses[courseId]) {\r\n                        considerationMessages.push(\r\n                            <Message.Item>\r\n                                {getCourseLink(courseId)}: could not retrieve course. Check handbook for more details.\r\n                            </Message.Item>\r\n                        )\r\n                    } else if (courses[courseId].placeholderTerms) {\r\n                        considerationMessages.push(\r\n                            <Message.Item>\r\n                                {getCourseLink(courseId)}: unknown term availability. Check handbook for more details.\r\n                            </Message.Item>\r\n                        )\r\n                    } else if (!courses[courseId].termsAvailable.includes(term)) {\r\n                        considerationMessages.push(\r\n                            <Message.Item>\r\n                                {getCourseLink(courseId)} is only available in {courses[courseId].termsAvailable.map(term => mapTermFull(term)).join(\", \")}\r\n                            </Message.Item>\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const style = {\r\n            marginBottom: \"20px\",\r\n            transition: \"0.3s ease\"\r\n        }\r\n\r\n        if (considerationMessages.length === 0) {\r\n            return (\r\n                <Message style={style} positive>\r\n                    <Message.Header>Considerations</Message.Header>\r\n                    <Message.List>\r\n                        Looks good to me!\r\n                    </Message.List>\r\n                </Message>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Message style={style} error>\r\n                <Message.Header>Considerations</Message.Header>\r\n                <Message.List>\r\n                    {considerationMessages}\r\n                </Message.List>\r\n            </Message>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Segment>\r\n                <Container>\r\n                    <Header as=\"h2\" textAlign=\"center\" style={{marginTop: \"50px\"}}>Plan your degree</Header>\r\n                    <p>The following degree plan has been generated based on the courses you have selected above. By default, our algorithm:</p>\r\n                    <ul>\r\n                        <li>allocates 18 UOC per term</li>\r\n                        <li>ensures courses have their prerequisites met</li>\r\n                        <li>ensures courses are offered in allocated terms</li>\r\n                        <li>does not allocate courses in Summer Term</li>\r\n                    </ul>\r\n                    <p>If the algorithm cannot place the course in a valid term, then it will place it <em>Year 1 - Semmmer Term</em> for you.</p>\r\n\r\n                    <p><b>Drag and drop the courses below to customise your degree plan!</b></p>\r\n\r\n                    <DragDropContext onDragEnd={this.onDragEnd} onDragStart={this.onDragStart}>\r\n                        {this.getConsiderationMessages(this.state)}\r\n                        {Object.keys(this.state.plan).map(yearId => (\r\n                            <Grid key={yearId} columns={4}>\r\n                                {this.state.plan[yearId].termOrder.map(termId => {\r\n                                    const term = this.state.plan[yearId][termId];\r\n                                    const courses = term.courseIds.map(courseId => this.state.courses[courseId]);\r\n                                    return (\r\n                                        <Grid.Column key={termId}>\r\n                                            <Term key={term.id} term={term} courses={courses} allCourses={this.state.courses}/>\r\n                                        </Grid.Column>\r\n                                    );\r\n                                })}\r\n                            </Grid>\r\n                        ))}\r\n                    </DragDropContext>\r\n                </Container>\r\n                <Container fluid style={{textAlign: \"center\", marginTop: \"50px\", height: \"auto\", padding: \"20px\"}}>\r\n                    <p><b>Disclaimer:</b> While we try our best, Circles is not an official UNSW website and does not guarantee accuracy or reliability (e.g. a course may not have its term availability published on the Handbook)</p>\r\n                    <p>Made by SRKO, 2020</p>\r\n                    <div>\r\n                        <a style={{margin: \"5px\"}} href=\"/\">Home</a>\r\n                        <a style={{margin: \"5px\"}} href=\"https://github.com/Circles360/Circles360.github.io\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>\r\n                    </div>\r\n                </Container>\r\n            </Segment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DegreePlanner","// For normal nodes\r\nimport React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nconst style = {zIndex: -9999, pointerEvents: 'none', opacity: 0, top: '50%'};\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle type=\"target\" position=\"top\" style={style} />\r\n      <div>\r\n            <b>{data.course_code}</b>\r\n      </div>\r\n      <Handle type=\"source\" position=\"top\" style={style} />\r\n    </>\r\n  );\r\n});\r\n","// For normal nodes\r\nimport React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nimport Refresh from '../assets/refresh.svg';\r\n\r\nconst style = {zIndex: -9999, pointerEvents: 'none', opacity: 0, top: '50%'};\r\nconst iconSize = {width: 12, position: 'relative', bottom: 2};\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle type=\"target\" position=\"top\" style={style} />\r\n      <div>\r\n            <br></br>\r\n            <b>{data.course_code}</b>\r\n            <div>\r\n              <img src={Refresh} alt={data.course_code} style={iconSize}/>\r\n            </div>\r\n      </div>\r\n      <Handle type=\"source\" position=\"top\" style={style} />\r\n    </>\r\n  );\r\n});\r\n","import React, { memo } from 'react';\r\n\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle type=\"target\" position=\"top\" style={{opacity: 0, top: '50%'}} />\r\n      <div>\r\n            <b>{data.degree_name}</b>\r\n      </div>\r\n      <Handle type=\"source\" position=\"bottom\" style={{opacity: 0, bottom: '50%'}} />\r\n    </>\r\n  );\r\n});\r\n","// Displays hover text in top left corner which contains info about the course\r\nimport React from 'react';\r\nimport { Segment, Header } from \"semantic-ui-react\";\r\n\r\nconst style = {\r\n    padding: \"20px\",\r\n    margin: \"10px\",\r\n    position: \"absolute\",\r\n    top: \"0\",\r\n    left: \"0\",\r\n    zIndex: \"10\",\r\n    maxWidth: \"20%\"\r\n}\r\n\r\nexport default function HoverInfo(props) {\r\n    return (\r\n        <Segment raised id=\"hoverbox\" style={style}>\r\n            <Header as=\"h4\" textAlign=\"center\">{props.node.data.course_code} - {props.node.data.course_name}</Header>\r\n            <p><b>Terms: </b>{(props.node.data.terms !== null) ? props.node.data.terms.join(\", \") : <text>Unknown</text>}</p>\r\n\r\n            {props.node.data.conditions.raw !== null ? <p><b>Conditions: </b>{props.node.data.conditions.raw}</p> : <p><b>Conditions: </b> None</p>}\r\n\r\n            {props.node.data.exclusions !== null &&\r\n            <p><b>Exclusion courses: </b>{props.node.data.exclusions.join(\", \")}</p>}\r\n        </Segment>\r\n    );\r\n}","// HELPER FUNCTION to highlight prerequisites in purple on hover\r\n// When hovering over an unselected node, show a path of edges\r\n// which will stop at a selected/selectable node\r\nimport getElement from './getelement.js';\r\n\r\nexport default function hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges) {\r\n    if (node.data.conditions.prerequisites === null) return;\r\n    // Get all selected edges one layer down and add to hover edges\r\n    for (const prereq of node.data.conditions.prerequisites) {\r\n        if (selectedEdges.hasOwnProperty('e' + prereq + '-' + node.id)) {\r\n            hoverEdges['e' + prereq + '-' + node.id] = 1;\r\n        }\r\n    }\r\n\r\n    // hoverEdge all unselected (AND POTENTIAL???) edges until we hit selected node (NO LONGER STOPS AT SELECTABLE NODE)\r\n    var prereqQueue = [node.id];\r\n    while (prereqQueue.length !== 0) {\r\n        const current = getElement(prereqQueue.shift(), elements);\r\n        // Make sure this course exists as a node in our map\r\n        if (current === null) continue;\r\n\r\n        if (current.data.conditions.prerequisites === null) continue;\r\n\r\n        for (const prereq of current.data.conditions.prerequisites) {\r\n            if (!selectedEdges.hasOwnProperty('e' + prereq + '-' + current.id)) {\r\n                hoverEdges['e' + prereq + '-' + current.id] = 1;\r\n            }\r\n            /*if ((!selectedEdges.hasOwnProperty('e' + prereq + '-' + current.id)) && (!potentialEdges.hasOwnProperty('e' + prereq + '-' + current.id))) {\r\n                hoverEdges['e' + prereq + '-' + current.id] = 1;\r\n            }*/\r\n\r\n            if ((!selectedNodes.hasOwnProperty(prereq))) {\r\n                prereqQueue.push(prereq);\r\n            }\r\n        }\r\n    }\r\n}\r\n","// HELPER FUNCTION to delete prerequisite edges\r\n// Usually used after unhovering or onclick\r\nexport default function unhoverPrerequisites(hoverEdges) {\r\n    for (var edge in hoverEdges) {\r\n        delete hoverEdges[edge];\r\n    }\r\n}","// import { findAllByDisplayValue } from '@testing-library/react';\r\nimport React, { Component } from 'react'\r\nimport { Button, Dropdown, Grid, Message} from 'semantic-ui-react'\r\n\r\nimport programsJSON from \"../webscraper/programs.json\"\r\nimport specialisationsJSON from \"../webscraper/specialisations.json\"\r\n\r\nconst MAJORS = 1;\r\nconst MINORS = 2;\r\nconst HONOURS = 3;\r\n\r\nconst courseOptions = {}\r\nconst programOptions = []\r\n\r\nfor (const code in programsJSON) {\r\n    if (programsJSON[code].degrees_involved.majors.length === 0 && programsJSON[code].degrees_involved.honours.length === 0) continue;\r\n\r\n    // Only these programs are supported\r\n    if (![\"3707\", \"3778\"].includes(code)) continue;\r\n\r\n    programOptions.push({\r\n        \"key\": code,\r\n        \"value\": code,\r\n        \"text\": code + \" - \" + programsJSON[code].name\r\n    })\r\n\r\n    courseOptions[code] = programsJSON[code].degrees_involved\r\n}\r\n\r\nfor (const code in courseOptions) {\r\n    for (const type in courseOptions[code]) {\r\n        const replacement = [];\r\n        for (const spec of courseOptions[code][type]) {\r\n            if (!(spec in specialisationsJSON)) continue;\r\n\r\n            // Only these majors and minors are supported\r\n            if (![\"SENGAH\", \"COMPA1\", \"ACCTA2\", \"FINSA2\", \"INFSA2\", \"MARKA2\", \"PSYCM2\"].includes(spec)) continue;\r\n            replacement.push({\r\n                \"key\": spec,\r\n                \"value\": spec,\r\n                \"text\": spec + \" - \" + specialisationsJSON[spec].name\r\n            })\r\n        }\r\n        courseOptions[code][type] = replacement;\r\n    }\r\n}\r\n\r\n// returns MAJORS if Majors but no Minors\r\n// returns MINORS if Majors and Minors exist\r\n// returns HONOURS if Honours exist\r\nconst getMajors = (code) => {\r\n    if (!(code in courseOptions)) {\r\n        console.log(\"code not found in majors\", code);\r\n        return [];\r\n    }\r\n\r\n    if (courseOptions[code].honours.length) return [HONOURS, courseOptions[code].honours];\r\n    if (courseOptions[code].minors.length) return [MINORS, courseOptions[code].majors];\r\n    return [MAJORS, courseOptions[code].majors];\r\n}\r\n\r\nconst getMinors = (code) => {\r\n    if (!(code in courseOptions)) {\r\n        console.log(\"code not found in minors\", code);\r\n        return [];\r\n    }\r\n\r\n    return courseOptions[code].minors;\r\n}\r\n\r\nclass DropdownDegrees extends Component {\r\n    state = {\r\n        programOptions: programOptions,\r\n        majorOptions: [],\r\n        minorOptions: [],\r\n\r\n        disabledPrimary: true,\r\n        disabledSecondary: true,\r\n        hiddenPrimary: 'hidden',\r\n        hiddenSecondary: 'hidden',\r\n\r\n        valProgram: null,\r\n        valPrimary: null,\r\n        valSecondary: null,\r\n\r\n        phPrimary: \"Select\",\r\n        phSecondary: \"N/A\",\r\n    }\r\n\r\n    chooseProgram = (e, program) => {\r\n        const [type, majors] = getMajors(program.value)\r\n        console.log(program.value)\r\n        this.setState({\r\n            valProgram: program.value,\r\n\r\n            valPrimary: null,\r\n            disabledPrimary: false,\r\n            hiddenPrimary: 'visible',\r\n            majorOptions: majors,\r\n            phPrimary: \"Select Major\",\r\n\r\n            valSecondary: null,\r\n            disabledSecondary: true,\r\n            hiddenSecondary: 'hidden',\r\n            minorOptions: [],\r\n            phSecondary: \"N/A\"\r\n        })\r\n\r\n        if (type === HONOURS) this.setState({phPrimary: \"Select Honour\"})\r\n        else if (type === MAJORS) this.setState({phPrimary: \"Select Major\"})\r\n        else {\r\n            this.setState({\r\n                phPrimary: \"Select Major\",\r\n                phSecondary: \"Select Minor (optional)\",\r\n                minorOptions: getMinors(program.value),\r\n                disabledSecondary: false,\r\n                hiddenSecondary: 'visible',\r\n            });\r\n        }\r\n    }\r\n\r\n    choosePrimary = (e, spec) => {\r\n        this.setState({\r\n            valPrimary: spec.value\r\n        })\r\n    }\r\n\r\n    chooseSecondary = (e, minor) => {\r\n        this.setState({\r\n            valSecondary: minor.value\r\n        })\r\n    }\r\n\r\n    getLink = () => {\r\n        console.log(window.location.href.split(\"/\")[1]);\r\n        const link = `#/${this.state.valProgram}/${this.state.valPrimary}` + (this.state.valSecondary ? `/${this.state.valSecondary}` : \"\");\r\n        return link;\r\n    }\r\n\r\n    supported = {\r\n        \"3707\": [\"SENGAH\"],\r\n        \"3778\": [\"COMPA1\"]\r\n    };\r\n\r\n    isDisabled = () => {\r\n        // this.state.messageVisible = \"hidden\"\r\n        // this.setState({messageVisible: \"hidden\"})\r\n\r\n        // if (!!this.state.valSecondary) return true;\r\n        if (!(this.state.valProgram in this.supported)) return true;\r\n        if (!this.supported[this.state.valProgram].includes(this.state.valPrimary)) return true;\r\n\r\n        // const link = `/${this.state.valProgram}/${this.state.valPrimary}` + (this.state.valSecondary ? `/${this.state.valSecondary}` : \"\");\r\n        // const currentURL = window.location.href;\r\n        // // console.log(currentURL.slice(currentURL.indexOf(\"#\") + 1))\r\n        // if (currentURL.slice(currentURL.indexOf(\"#\") + 1) === link) return true;\r\n\r\n        const isSupported = this.state.valProgram === null || this.state.valPrimary === null;\r\n        return isSupported;\r\n    }\r\n\r\n    getMessage = () => {\r\n        if (!(this.state.valProgram in this.supported)) {\r\n            return (\r\n                <Message info>\r\n                    {`Only ${Object.keys(this.supported).join(\", \")} is supported`}\r\n                </Message>\r\n            )\r\n        }\r\n\r\n\r\n        if (!this.supported[this.state.valProgram].includes(this.state.valPrimary)) {\r\n            return (\r\n                <Message info>\r\n                    {`Only ${this.supported[this.state.valProgram].join(\", \")} is supported`}\r\n                </Message>\r\n            )\r\n        }\r\n\r\n        const link = `/${this.state.valProgram}/${this.state.valPrimary}` + (this.state.valSecondary ? `/${this.state.valSecondary}` : \"\");\r\n        const currentURL = window.location.href;\r\n        // console.log(currentURL.slice(currentURL.indexOf(\"#\") + 1))\r\n        if (currentURL.slice(currentURL.indexOf(\"#\") + 1) === link) {\r\n            return (\r\n                <Message info>\r\n                    {`You're already looking at this degree`}\r\n                </Message>\r\n            )\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <Grid centered style={{marginTop: \"20px\", marginBottom: \"20px\"}}>\r\n                <Grid.Row>\r\n                    <Dropdown\r\n                        selection\r\n                        search\r\n                        onChange={this.chooseProgram}\r\n                        options= {this.state.programOptions}\r\n                        enabled\r\n                        placeholder= 'Select Program'\r\n                    />\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Dropdown\r\n                        selection\r\n                        search\r\n                        onChange={this.choosePrimary}\r\n                        options= {this.state.majorOptions}\r\n                        disabled= {this.state.disabledPrimary}\r\n                        value= {this.state.valPrimary}\r\n                        placeholder= {this.state.phPrimary}\r\n                        style={{visibility: this.state.hiddenPrimary}}\r\n                    />\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                    <Dropdown\r\n                        selection\r\n                        search\r\n                        clearable\r\n                        onChange={this.chooseSecondary}\r\n                        options= {this.state.minorOptions}\r\n                        disabled= {this.state.disabledSecondary}\r\n                        value= {this.state.valSecondary}\r\n                        placeholder= {this.state.phSecondary}\r\n                        style={{visibility: this.state.hiddenSecondary}}\r\n                    />\r\n                </Grid.Row>\r\n                {this.getMessage()}\r\n                <Grid.Row>\r\n                    <Button\r\n                        disabled={this.isDisabled()}\r\n                        onClick={() => {window.location.href=this.getLink()}}\r\n                        color=\"red\"\r\n                    >\r\n                        Load flowchart\r\n                    </Button>\r\n                </Grid.Row>\r\n            </Grid>\r\n        </>;\r\n    }\r\n}\r\n\r\nexport default DropdownDegrees","import React from \"react\";\r\nimport DropdownDegrees from \"./dropdownDegrees.js\"\r\nimport { Button, Container, Modal } from 'semantic-ui-react'\r\n\r\nfunction exampleReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'OPEN_MODAL':\r\n      return { open: true, dimmer: action.dimmer }\r\n    case 'CLOSE_MODAL':\r\n      return { open: false }\r\n    default:\r\n      throw new Error()\r\n  }\r\n}\r\n\r\nfunction SideBarModal() {\r\n  const [state, dispatch] = React.useReducer(exampleReducer, {\r\n    open: false,\r\n    dimmer: undefined,\r\n  })\r\n  const { open, dimmer } = state\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        size=\"mini\"\r\n        color=\"blue\"\r\n        onClick={() => dispatch({ type: 'OPEN_MODAL', dimmer: 'blurring' })}\r\n      >\r\n        Choose Degree\r\n      </Button>\r\n\r\n      <Modal\r\n        closeIcon\r\n        dimmer={dimmer}\r\n        open={open}\r\n        onClose={() => dispatch({ type: 'CLOSE_MODAL' })}\r\n      >\r\n        <Modal.Header textAlign=\"center\">Choose your degree</Modal.Header>\r\n        <Container>\r\n            <DropdownDegrees />\r\n        </Container>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SideBarModal\r\n\r\n//DropdownDegrees.clickDone() \r\n\r\n//DropdownDegrees d = new DropdownDegrees(); \r\n//d.clickDone()","// For normal nodes\r\nimport React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nconst style = {zIndex: -9999, pointerEvents: 'none', opacity: 0, top: '50%'};\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle type=\"target\" position=\"top\" style={style} />\r\n      <div>\r\n            <text>{data.instructions}</text>\r\n      </div>\r\n      <Handle type=\"source\" position=\"top\" style={style} />\r\n    </>\r\n  );\r\n});\r\n","// For normal nodes\r\nimport React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nimport Refresh from '../assets/refresh.svg';\r\n\r\nconst style = {zIndex: -9999, pointerEvents: 'none', opacity: 0, top: '50%'};\r\nconst iconSize = {width: 12, position: 'relative'};\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle type=\"target\" position=\"top\" style={style} />\r\n      <div>\r\n            <br></br>\r\n            <text>{data.instructions}</text>\r\n            <br></br>\r\n            <div>\r\n              <img src={Refresh} alt={data.course_code} style={iconSize}/>\r\n            </div>\r\n      </div>\r\n      <Handle type=\"source\" position=\"top\" style={style} />\r\n    </>\r\n  );\r\n});\r\n","// Helper functions to highlight nodes and edges\r\n// Will highlight/unhighlight nodes based on selectedNodes dictionary\r\nimport { isEdge } from \"react-flow-renderer\";\r\n\r\nconst selectedEdgeAnimated = {\r\n    stroke: \"#e94646\",\r\n    strokeWidth: 2,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\nconst selectedEdgeStatic = {\r\n    stroke: \"#454545\",\r\n    strokeWidth: 2,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\n\r\nconst hoverEdge = {\r\n    stroke: \"#e94646\",\r\n    strokeWidth: 2,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\n\r\nconst potentialHoverEdge = {\r\n    stroke: \"#e94646\",\r\n    strokeWidth: 2,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\nconst potentialEdge = {\r\n    stroke: \"#cecece\",\r\n    strokeWidth: 1,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\n\r\nconst unselectedEdge = {\r\n    stroke: \"#cecece\",\r\n    strokeWidth: 1,\r\n    opacity: 1,\r\n    transition: \"0.3s ease\"\r\n}\r\n\r\nexport default function highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap) {\r\n    const newElements = elements.map((e) => {\r\n        // It is an edge\r\n        if (isEdge(e)) {\r\n            if (selectedEdges.hasOwnProperty(e.id)) {\r\n                // Show selected edges (no matter what?)\r\n                if (hiddenEdges.hasOwnProperty(e.id)) e.isHidden = true;\r\n                else e.isHidden = false;\r\n\r\n                if (hoverEdges.hasOwnProperty(e.id)) return {...e, style: selectedEdgeAnimated, animated: true};\r\n                else return {...e, style: selectedEdgeStatic, animated: false};\r\n            } else if (potentialEdges.hasOwnProperty(e.id)) {\r\n                // Do not show potential edges in hide map\r\n                // However, do show them if they lead to a node which is selectable\r\n                if (hiddenEdges.hasOwnProperty(e.id)) e.isHidden = true;\r\n                else if (hideMap === true) {\r\n                    if (selectableNodes.hasOwnProperty(e.target)) e.isHidden = false;\r\n                    else e.isHidden = true;\r\n                } else e.isHidden = false;\r\n\r\n                if (hoverEdges.hasOwnProperty(e.id)) return {...e, style: potentialHoverEdge, animated: true};\r\n                else return {...e, style: potentialEdge, animated: false};\r\n            } else if (hoverEdges.hasOwnProperty(e.id)) {\r\n                // TODO: Do we need a condition here?\r\n                return {...e, style: hoverEdge, animated: true};\r\n            } else {\r\n                // Hide useless edges if hideMap\r\n                if (hideMap === true || hiddenEdges.hasOwnProperty(e.id)) e.isHidden = true;\r\n                else e.isHidden = false;\r\n                return {...e, style: unselectedEdge, animated: false};\r\n            }\r\n        }\r\n\r\n        // It is a node\r\n        if (selectedNodes.hasOwnProperty(e.id)) {\r\n            // Show selected nodes (no matter what?)\r\n            if (hiddenNodes.hasOwnProperty(e.id)) e.isHidden = true;\r\n            else e.isHidden = false;\r\n\r\n            return {...e, style: {...e.style, color: e.textSelectedColour, background: e.selectedColour}};\r\n        } else if (selectableNodes.hasOwnProperty(e.id)) {\r\n            // Show selectable nodes whenever possible\r\n            if (hiddenNodes.hasOwnProperty(e.id)) e.isHidden = true;\r\n            else e.isHidden = false;\r\n\r\n            return {...e, style: {...e.style, color: e.textColour, background: e.selectableColour}};\r\n        } else {\r\n            // Hide unselected nodes when necessary\r\n            if (hideMap === true || hiddenNodes.hasOwnProperty(e.id)) e.isHidden = true;\r\n            else e.isHidden = false;\r\n            return {...e, style: {...e.style, color: e.textColour, background: 'white'}};\r\n        }\r\n    })\r\n\r\n    return newElements;\r\n}","// HELPER FUNCTION for selecting nodes\r\n// Given a selectable node, highlights potential edges and fills in prereq edges\r\n// import checkPrerequisites from './checkprerequisites.js';\r\n// import getElement from './getelement.js';\r\n\r\nexport default function selectNode(elements, node, selectedNodes, selectedEdges, selectableNodes, potentialEdges) {\r\n    selectedNodes[node.id] = 1;\r\n    delete selectableNodes[node.id];\r\n\r\n    // Turn its prerequisite potential edges into actual edges\r\n    // Keep grey edges as grey\r\n    if (node.data.conditions.prerequisites !== null) {\r\n        for (const prereq of node.data.conditions.prerequisites) {\r\n            if (potentialEdges.hasOwnProperty('e' + prereq + '-' + node.id)) {\r\n                selectedEdges['e' + prereq + '-' + node.id] = 1;\r\n                delete potentialEdges['e' + prereq + '-' + node.id];\r\n            }\r\n        }\r\n    }\r\n\r\n    // Unlock its future edges\r\n    if (node.data.unlocks !== null) {\r\n        for (const unlockCourse of node.data.unlocks) {\r\n            // Edges from node to unlocks should be unselected\r\n            if (selectedNodes.hasOwnProperty(unlockCourse)) {\r\n                // This course is already selected. Make the edge a selected edge\r\n                selectedEdges['e' + node.id + '-' + unlockCourse] = 1;\r\n            } else {\r\n                // This course is either unselected or selectable\r\n                // In either case, add potential edge\r\n                potentialEdges['e' + node.id + '-' + unlockCourse] = 1;\r\n            }\r\n        }            \r\n    }\r\n\r\n    return;\r\n}\r\n","// HELPER FUNCTION for unselecting nodes\r\n// Given a selected node, unselects it and pushes it onto a queue to be analysed\r\n// ==================ON THE QUEUE==========================\r\n// Unshift node and Manages its prerequisites as follows:\r\n//  - if the prereq node is selected, turn selected edges into potential edges\r\n//  - if otherwise, do nothing\r\n// Determine the status of the current node:\r\n//  - if it meets prerequisites, leave it as is.\r\n//  - if it does not meet prerequisites, make it unselectable (delete from selectable/selected)\r\n// For each unlock:\r\n// - if the current node is not selected, turn edge grey no matter what\r\n// - if the current node is selected, keep edge as it is\r\n// - push the unlock onto queue if it was selectable/selected\r\nimport getElement from './getelement.js';\r\nimport checkPrerequisites from './checkprerequisites.js';\r\n\r\nexport default function unselectNode(elements, node, selectedNodes, selectedEdges, selectableNodes, potentialEdges) {\r\n    // Unselect this node\r\n    delete selectedNodes[node.id];\r\n    var unselectQueue = [node.id];\r\n    while (unselectQueue.length !== 0) {\r\n        // Unshift and get the node\r\n        const current = getElement(unselectQueue.shift(), elements);\r\n        \r\n        // Analyse its prerequisites\r\n        // If the prereq node is selected, turn selected edge into potential edges\r\n        if (current.data.conditions.prerequisites !== null) {\r\n            for (const prereq of current.data.conditions.prerequisites) {\r\n                if (selectedNodes.hasOwnProperty(prereq)) {\r\n                    if (selectedEdges.hasOwnProperty('e' + prereq + '-' + current.id)) {\r\n                        delete selectedEdges['e' + prereq + '-' + current.id];\r\n                        potentialEdges['e' + prereq + '-' + current.id] = 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Determine the status of the current node\r\n        if (! checkPrerequisites(current, elements, selectedNodes)) {\r\n            // Does not meet prerequisites. Make it unselectable\r\n            if (selectableNodes.hasOwnProperty(current.id)) delete selectableNodes[current.id];\r\n            else if (selectedNodes.hasOwnProperty(current.id)) delete selectedNodes[current.id];\r\n        } else {\r\n            // Meets prerequisites. Make it selectable\r\n            if (selectedNodes.hasOwnProperty(current.id)) delete selectedNodes[current.id];\r\n            selectableNodes[current.id] = 1;\r\n        }\r\n\r\n        // Analyse its unlocks\r\n        if (current.data.unlocks !== null) {\r\n            for (const unlockCourse of current.data.unlocks) {\r\n                if (! selectedNodes.hasOwnProperty(current.id)) {\r\n                    // Make edge grey\r\n                    if (potentialEdges.hasOwnProperty('e' + current.id + '-' + unlockCourse)) delete potentialEdges['e' + current.id + '-' + unlockCourse];\r\n                    else if (selectedEdges.hasOwnProperty('e' + current.id + '-' + unlockCourse)) delete selectedEdges['e' + current.id + '-' + unlockCourse];\r\n                }\r\n\r\n                // Lets push everything no matter what and try it out\r\n                unselectQueue.push(unlockCourse);\r\n                /*if (selectedNodes.hasOwnProperty(unlockCourse) || selectableNodes.hasOwnProperty(unlockCourse)) {\r\n                    unselectQueue.push(unlockCourse);\r\n                }*/\r\n            }\r\n        }\r\n    }\r\n}","// HELPER FUNCTION to determine which previously unselectable nodes\r\n// are now selectable\r\nimport checkPrerequisites from './checkprerequisites.js';\r\n// import getElement from './getelement.js';\r\nimport {isNode} from 'react-flow-renderer';\r\n\r\nexport default function getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges) {\r\n    // TODO: Deal with outsider nodes\r\n\r\n    const analyseNodesKeys = [];\r\n    for (const e of elements) {\r\n        if (isNode(e)) {\r\n            analyseNodesKeys.push(e);\r\n        }\r\n    }\r\n\r\n    // Analyse the target of potential edges for potential nodes\r\n    /*var analyseNodes = {};\r\n    const potentialEdgesKeys = Object.keys(potentialEdges);\r\n    for (var edge of potentialEdgesKeys) {\r\n        // Get the target course\r\n        const target = edge.split('-')[1];\r\n\r\n        if ((! selectedNodes.hasOwnProperty(target)) && (! selectableNodes.hasOwnProperty(target))) {\r\n            analyseNodes[edge.split('-')[1]] = 1;\r\n        }\r\n    }*/\r\n\r\n    \r\n    //const analyseNodesKeys = Object.keys(analyseNodes);\r\n    //console.log(\"==========ANALYSE NODES KEYS===========\");\r\n    //console.log(analyseNodesKeys);\r\n    //console.log(\"==============ELEMENTS===============\");\r\n    //console.log(elements);\r\n\r\n    for (const node of analyseNodesKeys) {\r\n        // Determine if the prerequisite has been met\r\n        //const node = getElement(nodeID, elements);\r\n        //console.log(node);\r\n        \r\n        // If the node is already selected, don't bother making it selectable\r\n        if (selectedNodes.hasOwnProperty(node.id)) continue;\r\n\r\n\r\n        if (checkPrerequisites(node, elements, selectedNodes)) {\r\n            //console.log(\"SELECTABLE\");\r\n            //console.log(node.id);\r\n            selectableNodes[node.id] = 1;\r\n        } else {\r\n            if (selectableNodes.hasOwnProperty(node.id)) delete selectableNodes[node.id];\r\n            //console.log(\"DELETE UNSELECTABLE\");\r\n            //console.log(node.id);\r\n            // TODO: Deal with selected nodes cases? (e.g. unselecting a child???)\r\n\r\n        }\r\n    }\r\n}","// HELPER FUNCTION to toggle exclusion courses\r\n// Will hide the current course and its edges, unhide the next course and edges\r\n// in the queue. Finds new edges to show by regex substitution???\r\nimport { getConnectedEdges } from 'react-flow-renderer';\r\nimport getElement from './getelement.js';\r\nimport checkPrerequisites from './checkprerequisites.js';\r\nimport unselectNode from './unselectnode.js';\r\n\r\nexport default function exclusionSwap(node, elements, edges, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups) {\r\n    for (var group of exclusionGroups) {\r\n        if (group.includes(node.id)) {\r\n            // Move this course to the back\r\n            const prevCourse = group.shift();\r\n            group.push(prevCourse);\r\n\r\n            // Current course we need to display is now at front of queue\r\n            const curCourse = group[0];\r\n\r\n            // Toggle the nodes we are swapping\r\n            for (var e of elements) {\r\n                if (e.id === prevCourse) hiddenNodes[e.id] = 1;\r\n                if (e.id === curCourse) delete hiddenNodes[e.id];\r\n            }\r\n\r\n            // Determine the state of the nodes (E.g. COMP6441 can be selectable\r\n            // whilst COMP6841 is not)\r\n            var curNode = getElement(curCourse, elements);\r\n            if (checkPrerequisites(curNode, elements, selectedNodes)) {\r\n                // The new node is selectable\r\n                selectableNodes[curCourse] = 1;\r\n\r\n                // Determine previous node condition\r\n                if (selectedNodes.hasOwnProperty(prevCourse)) {\r\n                    // Make current node selected and previous node unselected\r\n                    delete selectedNodes[prevCourse];\r\n                    delete selectableNodes[curCourse];\r\n                    selectedNodes[curCourse] = 1;\r\n                } else if (selectableNodes.hasOwnProperty(prevCourse)) {\r\n                    // Current node is selectable and previous node is unselectable\r\n                    delete selectableNodes[prevCourse];\r\n                }\r\n            } else {\r\n                // The new node is not selectable. Unselect the original node\r\n                unselectNode(elements, node, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            }\r\n\r\n            // Get all the edges of the previuos course and hide all of them\r\n            // Then use regex sub to determine the new edges to reveal\r\n            // Transfer over selected, potential and hover edges if they are in newEdgesList\r\n            var edgesList = getConnectedEdges([node], edges);\r\n            var newEdgesList = getConnectedEdges([curNode], edges);\r\n            var edgesIds = [];\r\n            var newEdgesIds = [];\r\n            for (const edge of edgesList) {\r\n                edgesIds.push(edge.id);\r\n            }\r\n            for (const newEdge of newEdgesList) {\r\n                newEdgesIds.push(newEdge.id);\r\n            }\r\n\r\n            // Stores all the common edges\r\n            var checkedEdges = [];\r\n\r\n            // Go through each edge we need to hide and check what we should\r\n            // do with the edge in hideEdgesList\r\n            for (const edge of edgesIds) {\r\n                // Hide the edge\r\n                console.log(\"Hiding \" + edge);\r\n                hiddenEdges[edge] = 1;\r\n\r\n                // Get the new edge we are trying to reveal. If it exists,\r\n                // mark it as a checked edge (common edge)\r\n                const newEdgeId = edge.replace(prevCourse, curCourse);\r\n                if (getElement(newEdgeId, edges) !== null) {\r\n                    checkedEdges.push(newEdgeId);\r\n                }\r\n\r\n                // Transfer the edge property if it exists as an edge of the new\r\n                // node to be revealed\r\n\r\n                // If it is selected, unselect it\r\n                if (selectedEdges.hasOwnProperty(edge)) {\r\n                    delete selectedEdges[edge];\r\n                    if (newEdgesIds.includes(newEdgeId)) {\r\n                        selectedEdges[newEdgeId] = 1;\r\n                    }\r\n                }\r\n\r\n                // If it is potential, unpotential it.\r\n                if (potentialEdges.hasOwnProperty(edge)) {\r\n                    delete potentialEdges[edge];\r\n                    if (newEdgesIds.includes(newEdgeId)) {\r\n                        potentialEdges[newEdgeId] = 1;\r\n                    }\r\n                }\r\n\r\n                // If hover, unhover it\r\n                if (hoverEdges.hasOwnProperty(edge)) {\r\n                    delete hoverEdges[edge];\r\n                    if (newEdgesIds.includes(newEdgeId)) {\r\n                        hoverEdges[newEdgeId] = 1;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If the edge is not a common edge with the new node,\r\n            // make sure the target is not selectable anymore\r\n            for (const edge of edgesIds) {\r\n                const newEdgeId = edge.replace(prevCourse, curCourse);\r\n                if (! checkedEdges.includes(newEdgeId)) {\r\n                    var target = newEdgeId.split('-')[1];\r\n\r\n                    // TODO: Temporary fix, make sure target is not the current course\r\n                    if (target === curCourse) continue;\r\n\r\n                    if (selectableNodes.hasOwnProperty(target)) {\r\n                        // TODO: This won't work if the target node condition is determined by\r\n                        // units. We can check these conditions at the end???\r\n                        delete selectableNodes[target];\r\n                    }\r\n                }\r\n            }\r\n\r\n            // For each edge, show it if BOTH target and source are not hidden\r\n            // Will also show any additional edges\r\n            // (E.g. COMP6441, COMP6841. COMP6841 -> COMP6448 but COMP6441 does not)\r\n            for (const edge of newEdgesIds) {\r\n                var newEdge = getElement(edge, edges);\r\n                const sourceNode = getElement(newEdge.source, elements);\r\n                const targetNode = getElement(newEdge.target, elements);\r\n\r\n                // Show the edge if both nodes are not hidden\r\n                if (!hiddenNodes.hasOwnProperty(sourceNode.id) && !hiddenNodes.hasOwnProperty(targetNode.id)) {\r\n                    console.log(\"Revealing \" + edge);\r\n                    delete hiddenEdges[edge];\r\n                }\r\n\r\n                // Determine if this edge has been checked before\r\n                if (checkedEdges.includes(edge)) {\r\n                    // It has been checked before.\r\n                    // TODO: This can break if both nodes have same edges\r\n                    // but one has an additional prerequisite\r\n                    continue;\r\n                } else {\r\n                    // It has NOT been checked before\r\n                    if (selectedNodes.hasOwnProperty(curCourse)) {\r\n                        if (sourceNode.id === curCourse) {\r\n                            // Node to be revealed is selected and source of edge.\r\n                            // Make the edge potential\r\n                            potentialEdges[edge] = 1;\r\n\r\n                            // Check if the target node is selectable\r\n                            if (! selectableNodes.hasOwnProperty(targetNode.id)) {\r\n                                if (checkPrerequisites(targetNode, elements, selectedNodes)) {\r\n                                    selectableNodes[targetNode.id] = 1;\r\n                                } else {\r\n                                    // TODO: The edge does not meet the prerequisite.\r\n                                    // Not sure what happens here :/\r\n                                }\r\n                            }\r\n                        } else {\r\n                            // Reveal node is selected and target of edge. Check previous\r\n                            // edges/nodes\r\n                            if (curNode.data.conditions.prerequisites !== null) {\r\n                                for (const prereq of curNode.data.conditions.prerequisites) {\r\n                                    if (selectedNodes.hasOwnProperty(prereq)) {\r\n                                        // This node was selected. Make the edge selected\r\n                                        delete potentialEdges['e' + prereq + '-' + curCourse];\r\n                                        selectedEdges['e' + prereq + '-' + curCourse] = 1;\r\n                                    } else {\r\n                                        // This node was not selected. Make sure edge is unselected\r\n                                        delete potentialEdges['e' + prereq + '-' + curCourse];\r\n                                        delete selectedEdges['e' + prereq + '-' + curCourse];\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // The node was not selected before. Delete any potential edges\r\n                        // Make the target node unseletable if prereqs are not met\r\n                        if (potentialEdges.hasOwnProperty(edge)) {\r\n                            delete potentialEdges[edge];\r\n                            if (selectableNodes.hasOwnProperty(targetNode.id)) {\r\n                                if (!checkPrerequisites(targetNode, elements, selectedNodes)) {\r\n                                    delete selectableNodes[targetNode.id];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n}","// HELPER FUNCTION FOR unselecting nodes\r\n// Determines if any nodes not connected to unselect node needs to be unselected.\r\n// For example, nodes which rely on N units completed\r\nimport checkPrerequisites from './checkprerequisites.js';\r\nimport checkPrequisiteUnits from './checkprerequisites.js';\r\nimport unselectNode from './unselectnode.js';\r\nimport getElement from './getelement.js';\r\n\r\nexport default function unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges) {\r\n    console.log(\"UNSELECTUNCONNECTED\");\r\n    const selectedNodesList = Object.keys(selectedNodes);\r\n    for (const selected of selectedNodesList) {\r\n        if (selected === \"SENGAH\") continue;\r\n        console.log(\"CHECKING \" + selected);\r\n\r\n        // Determine if prerequisites are met\r\n        const selectedNode = getElement(selected, elements);\r\n        if (! checkPrerequisites(selectedNode, elements, selectedNodes)) {\r\n            // Prerequisites are not met\r\n            unselectNode(elements, selectedNode, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            continue;\r\n        }\r\n\r\n        // CASE if the node is selected and it has n_course prerequisite \r\n        if (selectedNode.data.conditions.units_required !== null) {\r\n            console.log(\"+++++++++++++++++++\", selectedNode.id);\r\n            // Units required exists\r\n            // Do not count the nodes it \"unlocks\" towards its unit count\r\n            // DO not count nodes with a higher \"units_required\" towards its unit count\r\n            // NOTE: This might backfire if it has an unlock which DOES NOT\r\n            // require it as a prerequisite\r\n            \r\n            var trueSelectedNodes = {...selectedNodes};\r\n\r\n            if (selectedNode.data.unlocks !== null) {\r\n                // Create unlock queue to process \"selected\" unlocks\"\r\n                const selectedUnlockQueue = [];\r\n                for (const unlockCourse of selectedNode.data.unlocks) {\r\n                    if (selectedNodes.hasOwnProperty(unlockCourse)) selectedUnlockQueue.push(unlockCourse);\r\n                }\r\n\r\n                while (selectedUnlockQueue.length !== 0) {\r\n                    const curUnlock = getElement(selectedUnlockQueue.shift(), elements);\r\n                    console.log(\"------------- deleting \" + curUnlock.id);\r\n                    delete trueSelectedNodes[curUnlock.id];\r\n\r\n                    if (curUnlock.data.unlocks !== null) {\r\n                        for (const unlockCourse of curUnlock.data.unlocks) {\r\n                            if (selectedNodes.hasOwnProperty(unlockCourse)) selectedUnlockQueue.push(unlockCourse);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // We now have a list of nodes which will count towards our current node's unit requirements\r\n            // Final check = Check for other selected nodes which have unit requirements\r\n            // Do not count them unless their unit requirements are smaller than current node's.\r\n            const trueSelectedNodesList = Object.keys(trueSelectedNodes);\r\n            for (const selected of trueSelectedNodesList) {\r\n                console.log(\"Checking \", selected);\r\n                const selectedUnitsNode = getElement(selected, elements);\r\n                if (selectedUnitsNode.data.conditions.units_required !== null) {\r\n                    if (selectedUnitsNode.data.conditions.units_required >= selectedNode.data.conditions.units_required) {\r\n                        delete trueSelectedNodes[selected];\r\n                    }\r\n                }\r\n            }\r\n\r\n            console.log(\"TRUE SELECTED LOOKS LIKE\", trueSelectedNodes);\r\n            // Perform prerequisite unit check once more\r\n            if (! checkPrequisiteUnits(selectedNode, elements, trueSelectedNodes)) {\r\n                unselectNode(elements, selectedNode, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            }\r\n        }\r\n    }\r\n\r\n    const selectableNodesList = Object.keys(selectableNodes);\r\n    for (const selectable of selectableNodesList) {\r\n        // Determine if prerequisites are met\r\n        const selectableNode = getElement(selectable, elements);\r\n        if (! checkPrerequisites(selectableNode, elements, selectedNodes)) {\r\n            // Prerequisites are not met\r\n            delete selectableNode[selectable];\r\n        }\r\n    }\r\n}","import React, {useState} from 'react';\r\nimport ReactFlow, {isNode, isEdge} from 'react-flow-renderer';\r\nimport TutorialNode1 from './tutorialnode1.js';\r\nimport TutorialNode2 from './tutorialnode2.js';\r\n\r\nimport hoverPrerequisites from './hoverprerequisites.js';\r\nimport unhoverPrerequisites from './unhoverprerequisites.js';\r\nimport highlightElements from './highlightelements.js';\r\n// import checkPrerequisites from './checkprerequisites.js';\r\n\r\nimport selectNode from './selectnode.js';\r\nimport unselectNode from './unselectnode.js';\r\nimport getSelectable from './getselectable.js';\r\nimport exclusionSwap from './exclusionswap.js';\r\nimport unselectUnconnected from './unselectunconnected.js';\r\n\r\nvar elementsData = [\r\n    {id: \"CODE0000\", type: \"tutorial1\", data: {instructions: \"Circles is an interactive degree planner\", course_level: null, units: 0, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: null, prerequisites: null, corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE1111\"]}, position: {x: -150, y: -150}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"black\", background: \"lightgrey\", width: 100, height: 100, borderRadius: 50, border: \"2px solid black\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: 'black', textSelectedColour: 'black', selectedColour: 'lightgrey', selectableColour: 'black', isHidden: false},\r\n    {id: \"CODE1111\", type: \"tutorial1\", data: {instructions: \"Click on a node to take the course\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE0000\", prerequisites: [\"CODE0000\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE7777\", \"CODE2222\"]}, position: {x: -75, y: 0}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#1EB13C\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #1EB13C\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#1EB13C', textSelectedColour: 'white', selectableColour: '#bce8c5', selectedColour: '#1EB13C', isHidden: false},\r\n    {id: \"CODE2222\", type: \"tutorial1\", data: {instructions: \"Courses light up when you clear all the prerequisites\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE1111\", prerequisites: [\"CODE1111\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE7777\", \"CODE3333\", \"CODE4444\"]}, position: {x: 50, y: -115}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#166DBA\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #166DBA\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#166DBA', textSelectedColour: 'white', selectableColour: '#b9d3ea', selectedColour: '#166DBA', isHidden: false},\r\n\r\n    {id: \"CODE7777\", type: \"tutorial1\", data: {instructions: \"Hover over a node to see its prerequisites\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: 'CODE1111 && CODE2222', prerequisites: ['CODE1111', 'CODE2222'], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, unlocks: null}, position: {x: 110, y: 75}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#D66328\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #8A36B4\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#8A36B4', textSelectedColour: 'white', selectableColour: '#dcc3e9', selectedColour: '#8A36B4', isHidden: false},\r\n\r\n    {id: \"CODE3333\", type: \"tutorial2\", data: {instructions: \"Double click to toggle between equivalent courses\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE2222\", prerequisites: [\"CODE2222\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: [\"CODE4444\"], unlocks: null}, position: {x: 225, y: -50}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#CA1818\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #CA1818\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#CA1818', textSelectedColour: 'white', selectableColour: '#efbaba', selectedColour: '#CA1818', isHidden: false},\r\n    {id: \"CODE4444\", type: \"tutorial2\", data: {instructions: \"Look out for the black 'swap' icon on nodes!\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE2222\", prerequisites: [\"CODE2222\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: [\"CODE3333\"], unlocks: null}, position: {x: 225, y: -50}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#CA1818\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #CA1818\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#CA1818', textSelectedColour: 'white', selectableColour: '#efbaba', selectedColour: '#CA1818', isHidden: false},\r\n    \r\n    {id: \"CODE5555\", type: \"tutorial1\", data: {instructions: \"This course requires 24UOC. It will be selectable once you have enough units\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: null, prerequisites: null, corequisites: null, units_required: 24, level_for_units_required: null, core_year: null, other: null}, equivalents: null, unlocks: null}, position: {x: -150, y: 125}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 8, fontWeight: \"bold\", color: \"#D66328\", background: \"white\", width: 80, height: 80, borderRadius: 40, border: \"2px solid #D66328\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#D66328', textSelectedColour: 'white', selectableColour: '#f3d0bf', selectedColour: '#D66328', isHidden: false},\r\n    \r\n    {id: 'eCODE0000-CODE1111', source: 'CODE0000', target: 'CODE1111', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE1111-CODE2222', source: 'CODE1111', target: 'CODE2222', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE3333', source: 'CODE2222', target: 'CODE3333', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE4444', source: 'CODE2222', target: 'CODE4444', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE1111-CODE7777', source: 'CODE1111', target: 'CODE7777', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE7777', source: 'CODE2222', target: 'CODE7777', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false}\r\n\r\n];\r\n\r\n// var nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\nvar selectedNodes = {\"CODE0000\": 1};\r\n// var selectedNodes = {\"CODE0000\": 1};\r\nvar selectedEdges = {};\r\nvar selectableNodes = {\"CODE1111\": 1};\r\nvar potentialEdges = {\"eCODE0000-CODE1111\": 1};\r\nvar hoverEdges = {};\r\nvar exclusionGroups = [[\"CODE3333\", \"CODE4444\"]];\r\nvar exclusionNodes = {};\r\nvar hiddenNodes = {\"CODE4444\": 1};\r\nvar hiddenEdges = {\"eCODE2222-CODE4444\": 1};\r\n\r\nconst nodeTypes = {\r\n    tutorial1: TutorialNode1,\r\n    tutorial2: TutorialNode2,\r\n};\r\n\r\n\r\n// elementsData = highlightElements(elementsData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n\r\n\r\n\r\n\r\nconst InteractiveTutorial = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    // const [hoverNode, setHoverNode] = useState();\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onLoad = (reactFlowInstance) => {\r\n        // HARD RESET STATE ON LOAD\r\n        selectedNodes = {\"CODE0000\": 1};\r\n        // selectedNodes = {\"CODE0000\": 1};\r\n        selectedEdges = {};\r\n        selectableNodes = {\"CODE1111\": 1};\r\n        potentialEdges = {\"eCODE0000-CODE1111\": 1};\r\n        hoverEdges = {};\r\n        exclusionGroups = [[\"CODE3333\", \"CODE4444\"]];\r\n        exclusionNodes = {};\r\n        hiddenNodes = {\"CODE4444\": 1};\r\n        hiddenEdges = {\"eCODE2222-CODE4444\": 1};\r\n        \r\n        for (var e of elements) {\r\n            e.isHidden = false;\r\n        }\r\n        for (const group of exclusionGroups) {\r\n            for (const exclusion of group) {\r\n                exclusionNodes[exclusion] = 1;\r\n            }\r\n        }\r\n        for (var group of exclusionGroups) {\r\n            const last = group.pop();\r\n            for (var course of elements) {\r\n                if (last === course.id) {\r\n                    course.isHidden = true;\r\n                    for (var edge of elements) {\r\n                        if (isNode(edge)) continue;\r\n                        if (edge.source === last || edge.target === last) {\r\n                            edge.isHidden = true;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            group.push(last);\r\n        }\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n        reactFlowInstance.fitView();\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        unhoverPrerequisites(hoverEdges);\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n    \r\n    const toggleExclusion = (element) => {\r\n        setElements(exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups));\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (element.id === \"CODE0000\" || element.id === 'CODE6666') return;\r\n        if (isEdge(element)) return;\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return;\r\n\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            selectUnselect(element);\r\n        }\r\n    }\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        // setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    return (\r\n        <ReactFlow\r\n            elements={elements}\r\n            style={{width: \"100%\", height: \"75vh\"}}\r\n            onLoad={onLoad}\r\n            nodeTypes={nodeTypes}\r\n            nodesConnectable={false}\r\n            onElementClick={onElementClick}\r\n            paneMoveable={false}\r\n            selectNodesOnDrag={false}\r\n            elementsSelectable={false}\r\n            nodesDraggable={false}\r\n            onNodeMouseEnter={onNodeMouseEnter}\r\n            onNodeMouseLeave={onNodeMouseLeave}\r\n        >\r\n        </ReactFlow>\r\n    );\r\n}\r\n\r\nexport default InteractiveTutorial;","import React from \"react\";\r\nimport { Button, Container, Modal } from 'semantic-ui-react'\r\nimport InteractiveTutorial from './interactivetutorial.js';\r\n\r\nfunction exampleReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'OPEN_MODAL':\r\n      return { open: true, dimmer: action.dimmer }\r\n    case 'CLOSE_MODAL':\r\n      return { open: false }\r\n    default:\r\n      throw new Error()\r\n  }\r\n}\r\n\r\nfunction TutorialModal() {\r\n  const [state, dispatch] = React.useReducer(exampleReducer, {\r\n    open: false,\r\n    dimmer: undefined,\r\n  })\r\n  const { open, dimmer } = state\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        size=\"mini\"\r\n        color=\"black\"\r\n        onClick={() => dispatch({ type: 'OPEN_MODAL', dimmer: 'blurring' })}\r\n      >\r\n        <text>Need Help?</text>  \r\n      </Button>\r\n\r\n      <Modal\r\n        closeIcon\r\n        dimmer={dimmer}\r\n        open={open}\r\n        onClose={() => dispatch({ type: 'CLOSE_MODAL' })}\r\n      >\r\n        <Container>\r\n          <InteractiveTutorial />\r\n        </Container>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TutorialModal\r\n\r\n//DropdownDegrees.clickDone() \r\n\r\n//DropdownDegrees d = new DropdownDegrees(); \r\n//d.clickDone()","import React from 'react';\r\nimport SidebarModal from \"./sidebar-modal.js\";\r\nimport TutorialModal from \"./tutorial-modal.js\";\r\nimport { Icon, Button, Container, Header, Divider, Segment, Message, Label } from 'semantic-ui-react';\r\nimport ScrollTo from \"react-scroll-into-view\";\r\nimport specialisationsJSON from \"../webscraper/specialisations.json\";\r\nimport coursesJSON from \"../webscraper/courses.json\";\r\n\r\nconst REGEX_COURSE_CODE = /[A-Z]{4}\\d{4}/g;\r\n\r\nconst getCoursesInLevel = (rawList) => {\r\n    rawList = rawList.flat().filter(c => c !== \"ANY COURSE\");\r\n    const allCourseIds = Object.keys(coursesJSON);\r\n    const courseList = [];\r\n    rawList.forEach(courseId => {\r\n        if (courseId.match(REGEX_COURSE_CODE)) {\r\n            courseList.push(courseId);\r\n        } else if (courseId.match(/^[A-Z]{4}\\d$/)) {\r\n            const relevantCourses = allCourseIds.filter(c => c.includes(courseId));\r\n            relevantCourses.forEach(c => {\r\n                if (courseList.includes(c)) return;\r\n                courseList.push(c);\r\n            });\r\n        }\r\n    });\r\n\r\n    return courseList;\r\n}\r\n\r\nconst getTotalUnitsTaken = (selectedNodes) => {\r\n    const selectedCourses = Object.keys(selectedNodes).filter(c => c.match(REGEX_COURSE_CODE));\r\n    return selectedCourses.reduce((total, c) => total + (c in coursesJSON ? coursesJSON[c].units : 0), 0);\r\n}\r\n\r\nconst getSelectedCourses = (specialisationCodes, selectedNodes) => {\r\n    // console.log(specialisationCodes);\r\n    return specialisationCodes.map(specId => {\r\n        const levels = Object.keys(specialisationsJSON[specId].structure);\r\n        const coreCourses = [];\r\n\r\n        return levels.filter(levelName => {\r\n            const courseList = specialisationsJSON[specId].structure[levelName].courses;\r\n            if (!courseList) return false;\r\n            if (courseList.length === 1 && courseList.includes(\"ANY COURSE\")) return false;\r\n            return true;\r\n        }).map(levelName => {\r\n            const rawList = specialisationsJSON[specId].structure[levelName].courses;\r\n            const courseList = getCoursesInLevel(rawList);\r\n            const minUnits = specialisationsJSON[specId].structure[levelName].units_required;\r\n            const style = {\r\n                transition: \"0.3s ease\"\r\n            }\r\n            if (levelName.match(/[Cc]ore/g)) {\r\n                // CORE COURSE\r\n                courseList.forEach(c => coreCourses.push(c));\r\n                const unitsTaken = courseList.reduce((total, c) => total + (c in selectedNodes ? coursesJSON[c].units : 0), 0);\r\n                const showUnits = minUnits\r\n                    ? <Label horizontal style={{transition: \"0.3s ease\", alignSelf: \"flex-start\"}} color={unitsTaken >= minUnits ? \"green\" : \"red\"}>{unitsTaken}/{minUnits}</Label>\r\n                    : null;\r\n                return (\r\n                    <Segment key={levelName} color=\"red\">\r\n                        <div style={{display: \"flex\"}}>\r\n                            <Header style={{flexGrow: \"1\"}} as=\"h5\">{specId} - {levelName}</Header>\r\n                            {showUnits}\r\n                        </div>\r\n                        {courseList.map(c => c in selectedNodes ? <Label key={c} size=\"small\" color=\"grey\" style={style}>{c}</Label> : <Label key={c} size=\"small\" style={style}>{c}</Label>)}\r\n                    </Segment>\r\n                )\r\n            } else {\r\n                // Not core course. Render segment with chosen electives only.\r\n                const unitsTaken = courseList.reduce((total, c) => total + (c in selectedNodes && !coreCourses.includes(c) ? coursesJSON[c].units : 0), 0);\r\n                const showUnits = minUnits\r\n                    ? <Label horizontal style={{transition: \"0.3s ease\", alignSelf: \"flex-start\"}} color={unitsTaken >= minUnits ? \"green\" : \"red\"}>{unitsTaken}/{minUnits}</Label>\r\n                    : null;\r\n                return (\r\n                    <Segment key={levelName} style={{minHeight: \"70px\"}}>\r\n                        <div style={{display: \"flex\"}}>\r\n                            <Header style={{flexGrow: \"1\"}} as=\"h5\">{specId} - {levelName}</Header>\r\n                            {showUnits}\r\n                        </div>\r\n                        {courseList.filter(c => (c in selectedNodes && !coreCourses.includes(c))).map(c => <Label key={c} size=\"small\" color=\"grey\" style={style}>{c}</Label>)}\r\n                    </Segment>\r\n                )\r\n            }\r\n        })\r\n    });\r\n}\r\nclass Sidebar extends React.Component {\r\n    render() {\r\n        return (\r\n            <Container style={{paddingLeft: \"10px\", paddingRight: \"20px\"}}>\r\n                <Header as=\"h1\" textAlign=\"center\" style={{marginTop: \"10px\"}}>Circles</Header>\r\n                <Message info>\r\n                    <p>Circles is a <b>visual degree planner</b> for UNSW undergraduate students. Choose your program and degree to begin!</p>\r\n                    <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\"}}>\r\n                        <SidebarModal />\r\n                        <TutorialModal />\r\n                    </div>\r\n                </Message>\r\n                <Divider></Divider>\r\n                <Container>\r\n                    <div style={{display: \"flex\"}}>\r\n                        <Header style={{flexGrow: \"1\", marginTop: \"5px\"}} as=\"h3\">\r\n                            Your selected courses\r\n                        </Header>\r\n                        <Label style={{alignSelf: \"flex-start\"}} color=\"black\" basic>{getTotalUnitsTaken(this.props.selectedNodes)} UOC</Label>\r\n                    </div>\r\n                    {getSelectedCourses(this.props.specialisations, this.props.selectedNodes)}\r\n                </Container>\r\n                <Container textAlign=\"center\">\r\n                    <ScrollTo selector=\"#DegreePlanner\">\r\n                        <Button\r\n                            animated=\"vertical\"\r\n                            color=\"red\"\r\n                            style={{marginTop: \"10px\", marginBottom: \"10px\"}}\r\n                        >\r\n                            <Button.Content visible>Generate degree planner</Button.Content>\r\n                            <Button.Content hidden>\r\n                                <Icon name=\"arrow down\" />\r\n                            </Button.Content>\r\n                        </Button>\r\n                    </ScrollTo>\r\n\r\n                </Container>\r\n            </Container>\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Sidebar","import React, { useState } from \"react\";\r\nimport { Button, Dropdown } from \"semantic-ui-react\";\r\nimport { useStoreActions } from \"react-flow-renderer\";\r\nimport getElement from \"./getelement.js\";\r\n\r\nexport default function DropdownSearch(props) {\r\n    const [search, setSearch] = useState(null);\r\n\r\n    const handleChange = (e, prop) => {\r\n        setSearch(prop.value);\r\n    };\r\n\r\n    const { setInitTransform } = useStoreActions((actions) => actions);\r\n    const transformUpdater = (x, y, zoom) => {\r\n        setInitTransform({ x, y, k: zoom });\r\n    };\r\n\r\n    const clickDone = () => {\r\n        if (search === null) return;\r\n        const element = getElement(search, props.searchElements);\r\n\r\n        // Unhide the entire map when searching for a HIDDEN node\r\n        // This is so we don't take them to a blank page\r\n        if (props.hideMap === true && element.isHidden === true) props.toggleHidden();\r\n\r\n        transformUpdater(\r\n            -(element.position.x) * 2 + (window.innerWidth * 0.75)/2 - 64,\r\n            -(element.position.y) * 2 + (window.innerHeight)/2 - 64,\r\n            2\r\n        );\r\n            \r\n        // Show the node if it is hidden (At this point, the only hidden nodes\r\n        // are exclusion nodes since we toggle hidemap for nodes hidden by hidemap)\r\n        if (element.isHidden === true) {\r\n            // Determine the current showing node and hide it\r\n            for (const exclusion of element.data.exclusions) {\r\n                for (const course of props.searchElements) {\r\n                    if (course.id === exclusion) {\r\n                        // Check if this exclusion is revealed\r\n                        var exclusionNode = getElement(exclusion, props.searchElements);\r\n                        if (exclusionNode.isHidden === false) {\r\n                            // This is the node we need to toggle\r\n                            props.toggleExclusion(exclusionNode);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dropdown\r\n                selection\r\n                search\r\n                clearable\r\n                options={props.searchNodeOptions}\r\n                placeholder=\"Looking for a course?\"\r\n                onChange={handleChange}\r\n                onKeyPress={event => {\r\n                    if (event.key === 'Enter') {\r\n                      clickDone();\r\n                    }\r\n                  }}\r\n                value={search}\r\n            />\r\n            <Button\r\n                onClick={clickDone}\r\n                icon=\"search\"\r\n                color=\"blue\"\r\n                style={{marginLeft: \"5px\"}}\r\n            >\r\n            </Button>\r\n        </>\r\n    );\r\n}\r\n","// HELPER FUNCTION to initialise dropdown search list\r\n// Modifies a given list to contain all the options for search\r\nimport {isNode} from 'react-flow-renderer';\r\nexport default function dropdownSearchInit(elements, specialisations, dropdownSearch) {\r\n    for (const course of elements) {\r\n        if (specialisations.includes(course.id)) continue;\r\n        if (isNode(course)) {\r\n            dropdownSearch.push({\r\n                key: course.id,\r\n                value: course.id,\r\n                text: course.id + ' - ' + course.data.course_name\r\n            });\r\n        }\r\n    }\r\n}","// HELPER FUNCTION to initialise selectable nodes and edges\r\nimport checkPrerequisites from '../checkprerequisites';\r\n\r\nexport default function selectableInit(elements, nodesData, selectedNodes, selectableNodes, potentialEdges) {\r\n    for (const node of nodesData) {\r\n        if (selectedNodes.hasOwnProperty(node.id)) {\r\n            if (node.data.unlocks === null) continue;\r\n            for (const unlockCourse of node.data.unlocks) {\r\n                potentialEdges['e' + node.id + '-' + unlockCourse] = 1;\r\n            }\r\n        } else if (checkPrerequisites(node, elements, selectedNodes)) {\r\n            selectableNodes[node.id] = 1;\r\n        }\r\n    }\r\n}","// HELPER FUNCTION to initialise hidden nodes and edges of a map\r\nimport {isNode} from 'react-flow-renderer';\r\n\r\nexport default function hiddenInit(elements, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges) {\r\n    // Keep track of exclusion nodes for easier look up later on\r\n    for (const group of exclusionGroups) {\r\n        for (const exclusion of group) {\r\n            exclusionNodes[exclusion] = 1;\r\n        }\r\n    }\r\n\r\n    // Hide all exclusion nodes except for one\r\n    for (const group of exclusionGroups) {\r\n        const last = group.pop();\r\n        for (var course of elements) {\r\n            if (last === course.id) {\r\n                hiddenNodes[course.id] = 1;\r\n                for (const edge of elements) {\r\n                    if (isNode(edge)) continue;\r\n                    if (edge.source === last || edge.target == last) {\r\n                        hiddenEdges[edge.id] = 1;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        group.push(last);\r\n    }\r\n}","// HELPER FUNCTION to initialise search for nodes not on the flowchart\r\nexport default function additionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions) {\r\n    const nodesOnFlowchart = dataJSON.map(node => node.id);\r\n    for (const course in coursesJSON) {\r\n        if (!coursesJSON.hasOwnProperty(course)) continue;\r\n        if (nodesOnFlowchart.includes(course)) continue;\r\n\r\n        searchAdditionalOptions.push({\r\n            key: course,\r\n            value: course,\r\n            text: course + ' - ' + coursesJSON[course].course_name\r\n        });\r\n    }\r\n}","// HELPER FUNCTION to update coursesJSON with dataJSON\r\nexport default function coursesInit(rawCoursesJSON, dataJSON) {\r\n    var coursesJSON = {...rawCoursesJSON};\r\n    dataJSON.forEach(course => {\r\n        if (!coursesJSON.hasOwnProperty(course.id)) return;\r\n        coursesJSON[course.id].conditions = {...course.data.conditions};\r\n        coursesJSON[course.id].terms = course.data.terms;\r\n    });\r\n\r\n    return coursesJSON\r\n}","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider, Controls } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['SENGAH'];\r\nconst program = \"3707\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst BESengah = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">\r\n                                        Couldn't find a course up there? Add it here:\r\n                                        <Header.Subheader>\r\n                                            Courses shown on the flowchart cannot be selected here. Please use the flowchart instead.\r\n                                        </Header.Subheader>\r\n                                    </Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\"Additional courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BESengah;","import React, {useState} from 'react';\r\nimport ReactFlow, {isNode, isEdge} from 'react-flow-renderer';\r\nimport TutorialNode1 from './tutorialnode1.js';\r\nimport TutorialNode2 from './tutorialnode2.js';\r\n\r\nimport hoverPrerequisites from './hoverprerequisites.js';\r\nimport unhoverPrerequisites from './unhoverprerequisites.js';\r\nimport highlightElements from './highlightelements.js';\r\n// import checkPrerequisites from './checkprerequisites.js';\r\n\r\nimport selectNode from './selectnode.js';\r\nimport unselectNode from './unselectnode.js';\r\nimport getSelectable from './getselectable.js';\r\nimport exclusionSwap from './exclusionswap.js';\r\nimport unselectUnconnected from './unselectunconnected.js';\r\n\r\nvar elementsData = [\r\n    {id: \"CODE0000\", type: \"tutorial1\", data: {instructions: \"Circles is an interactive degree planner\", course_level: null, units: 0, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: null, prerequisites: null, corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE1111\"]}, position: {x: -280, y: -150}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 16, fontWeight: \"bold\", color: \"black\", background: \"lightgrey\", width: 140, height: 140, borderRadius: 70, border: \"2px solid black\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: 'black', textSelectedColour: 'black', selectedColour: 'lightgrey', selectableColour: 'black', isHidden: false},\r\n    {id: \"CODE1111\", type: \"tutorial1\", data: {instructions: \"Click on a node to take the course\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE0000\", prerequisites: [\"CODE0000\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE7777\", \"CODE2222\"]}, position: {x: -120, y: 0}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#1EB13C\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #1EB13C\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#1EB13C', textSelectedColour: 'white', selectableColour: '#bce8c5', selectedColour: '#1EB13C', isHidden: false},\r\n    {id: \"CODE2222\", type: \"tutorial1\", data: {instructions: \"Courses light up when you clear all the prerequisites\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE1111\", prerequisites: [\"CODE1111\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: null, unlocks: [\"CODE7777\", \"CODE3333\", \"CODE4444\"]}, position: {x: 60, y: -115}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#166DBA\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #166DBA\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#166DBA', textSelectedColour: 'white', selectableColour: '#b9d3ea', selectedColour: '#166DBA', isHidden: false},\r\n\r\n    {id: \"CODE7777\", type: \"tutorial1\", data: {instructions: \"Hover over a node to see its prerequisites\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: 'CODE1111 && CODE2222', prerequisites: ['CODE1111', 'CODE2222'], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, unlocks: null}, position: {x: 110, y: 75}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#D66328\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #8A36B4\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#8A36B4', textSelectedColour: 'white', selectableColour: '#dcc3e9', selectedColour: '#8A36B4', isHidden: false},\r\n\r\n    {id: \"CODE3333\", type: \"tutorial2\", data: {instructions: \"Double click to toggle between equivalent courses\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE2222\", prerequisites: [\"CODE2222\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: [\"CODE4444\"], unlocks: null}, position: {x: 250, y: -50}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#CA1818\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #CA1818\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#CA1818', textSelectedColour: 'white', selectableColour: '#efbaba', selectedColour: '#CA1818', isHidden: false},\r\n    {id: \"CODE4444\", type: \"tutorial2\", data: {instructions: \"Look out for the black 'swap' icon on nodes!\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: \"CODE2222\", prerequisites: [\"CODE2222\"], corequisites: null, units_required: null, level_for_units_required: null, core_year: null, other: null}, equivalents: null, exclusions: [\"CODE3333\"], unlocks: null}, position: {x: 250, y: -50}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#CA1818\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #CA1818\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#CA1818', textSelectedColour: 'white', selectableColour: '#efbaba', selectedColour: '#CA1818', isHidden: false},\r\n    \r\n    {id: \"CODE5555\", type: \"tutorial1\", data: {instructions: \"This course requires 24UOC.\", course_level: null, units: 6, terms: [\"Term1, Term2, Term3\"], conditions: {raw: \"RAW\", prereqs_executable: null, prerequisites: null, corequisites: null, units_required: 24, level_for_units_required: null, core_year: null, other: null}, equivalents: null, unlocks: null}, position: {x: -200, y: 115}, style: {cursor: 'pointer', display: \"flex\", textAlign: \"center\", alignItems: \"center\", justifyContent: \"center\", fontSize: 10, fontWeight: \"bold\", color: \"#D66328\", background: \"white\", width: 100, height: 100, borderRadius: 50, border: \"2px solid #D66328\", boxShadow: \"0px 0px 2px 0px grey\"}, textColour: '#D66328', textSelectedColour: 'white', selectableColour: '#f3d0bf', selectedColour: '#D66328', isHidden: false},\r\n    \r\n    {id: 'eCODE0000-CODE1111', source: 'CODE0000', target: 'CODE1111', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE1111-CODE2222', source: 'CODE1111', target: 'CODE2222', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE3333', source: 'CODE2222', target: 'CODE3333', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE4444', source: 'CODE2222', target: 'CODE4444', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE1111-CODE7777', source: 'CODE1111', target: 'CODE7777', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false},\r\n    {id: 'eCODE2222-CODE7777', source: 'CODE2222', target: 'CODE7777', type: 'straight', style: {opacity: '0.2', stroke: 'grey'}, animated: false, isHidden: false}\r\n\r\n];\r\n\r\n// var nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\nvar selectedNodes = {\"CODE0000\": 1};\r\n// var selectedNodes = {\"CODE0000\": 1};\r\nvar selectedEdges = {};\r\nvar selectableNodes = {\"CODE1111\": 1};\r\nvar potentialEdges = {\"eCODE0000-CODE1111\": 1};\r\nvar hoverEdges = {};\r\nvar exclusionGroups = [[\"CODE3333\", \"CODE4444\"]];\r\nvar exclusionNodes = {};\r\nvar hiddenNodes = {\"CODE4444\": 1};\r\nvar hiddenEdges = {\"eCODE2222-CODE4444\": 1};\r\n\r\nconst nodeTypes = {\r\n    tutorial1: TutorialNode1,\r\n    tutorial2: TutorialNode2,\r\n};\r\n\r\nconst InteractiveTutorialMain = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    // const [hoverNode, setHoverNode] = useState();\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onLoad = (reactFlowInstance) => {\r\n        // HARD RESET STATE ON LOAD\r\n        selectedNodes = {\"CODE0000\": 1};\r\n        // selectedNodes = {\"CODE0000\": 1};\r\n        selectedEdges = {};\r\n        selectableNodes = {\"CODE1111\": 1};\r\n        potentialEdges = {\"eCODE0000-CODE1111\": 1};\r\n        hoverEdges = {};\r\n        exclusionGroups = [[\"CODE3333\", \"CODE4444\"]];\r\n        exclusionNodes = {};        \r\n        hiddenNodes = {\"CODE4444\": 1};\r\n        hiddenEdges = {\"eCODE2222-CODE4444\": 1};\r\n\r\n        for (var e of elements) {\r\n            e.isHidden = false;\r\n        }\r\n        for (const group of exclusionGroups) {\r\n            for (const exclusion of group) {\r\n                exclusionNodes[exclusion] = 1;\r\n            }\r\n        }\r\n        for (var group of exclusionGroups) {\r\n            const last = group.pop();\r\n            for (var course of elements) {\r\n                if (last === course.id) {\r\n                    course.isHidden = true;\r\n                    for (var edge of elements) {\r\n                        if (isNode(edge)) continue;\r\n                        if (edge.source === last || edge.target === last) {\r\n                            edge.isHidden = true;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            group.push(last);\r\n        }\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n        reactFlowInstance.fitView();\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        unhoverPrerequisites(hoverEdges);\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n    \r\n    const toggleExclusion = (element) => {\r\n        setElements(exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups));\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (element.id === \"CODE0000\") return;\r\n        if (isEdge(element)) return;\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return;\r\n\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            selectUnselect(element);\r\n        }\r\n    }\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        // setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, false));\r\n    }\r\n\r\n    return (\r\n        <ReactFlow\r\n            elements={elements}\r\n            style={{width: \"100%\", height: \"75vh\"}}\r\n            onLoad={onLoad}\r\n            nodeTypes={nodeTypes}\r\n            nodesConnectable={false}\r\n            onElementClick={onElementClick}\r\n            paneMoveable={false}\r\n            selectNodesOnDrag={false}\r\n            elementsSelectable={false}\r\n            nodesDraggable={false}\r\n            onNodeMouseEnter={onNodeMouseEnter}\r\n            onNodeMouseLeave={onNodeMouseLeave}\r\n        >\r\n        </ReactFlow>\r\n    );\r\n}\r\n\r\nexport default InteractiveTutorialMain;","import React from 'react';\r\n\r\n\r\nimport DropdownDegrees from '../../components/dropdownDegrees.js'\r\nimport InteractiveTutorialMain from '../../components/interactivetutorialmain.js';\r\nimport { Message, Button, Container, Header } from 'semantic-ui-react';\r\nimport ScrollTo from \"react-scroll-into-view\";\r\n\r\nconst containerStyle = {\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-around\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n    lineHeight: \"normal\"\r\n    // border: \"1px solid black\"\r\n}\r\n\r\nconst getButton = (selector) => {\r\n    return (\r\n        <ScrollTo selector={selector} style={{marginTop: \"auto\", marginBottom: \"3%\"}}>\r\n            <Button\r\n                circular\r\n                color=\"blue\"\r\n                icon=\"arrow down\"\r\n            />\r\n        </ScrollTo>\r\n    );\r\n}\r\n\r\nconst Homepage = () => {\r\n    return (\r\n        <div>\r\n            <div id=\"landingPage\">\r\n                <Container style={containerStyle}>\r\n                    <Header as=\"h1\" style={{transition: \"2s ease\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%,-50%)\", fontSize: \"96px\"}} textAlign=\"center\">\r\n                        Circles\r\n                        <Header.Subheader style={{transition: \"2s ease\", fontSize: \"18px\"}}>The visual degree planner for UNSW undergraduate students</Header.Subheader>\r\n                    </Header>\r\n                    {getButton(\"#tutorial\")}\r\n                </Container >\r\n            </div>\r\n            <div id=\"tutorial\">\r\n                    <Container fluid style={containerStyle}>\r\n                        <Header as=\"h2\" textAlign=\"center\" style={{paddingTop: \"3%\", fontSize: \"36px\"}}>Tutorial</Header>\r\n                        <InteractiveTutorialMain />\r\n                        <Header as=\"h4\" textAlign=\"center\">After choosing your courses, a degree plan will be automatically generated for you.</Header>\r\n                        {getButton(\"#chooseDegree\")}\r\n                    </Container>\r\n            </div>\r\n            <div id=\"chooseDegree\">\r\n                <Container style={{...containerStyle, justifyContent: \"center\"}}>\r\n                    <Header as=\"h2\" textAlign=\"center\" style={{fontSize: \"36px\", marginTop: \"5vh\"}}>Choose your program and degree to begin</Header>\r\n                    <div>\r\n                        <Container style={{padding: \"10px\"}}>\r\n                            <Message warning>\r\n                                The UNSW handbook is currently undergoing updates for 2021. Although we try our best, some data may be incorrect or outdated, so some nodes on our flowchart may not be selectable. Please refer to the <a href=\"https://www.handbook.unsw.edu.au\" target=\"_blank\" rel=\"noopener noreferrer\">handbook</a> for the latest update.\r\n                            </Message>\r\n                        </Container>\r\n                        <DropdownDegrees />\r\n                    </div>\r\n                </Container>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Homepage;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1', 'ACCTA2'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1ACCTA2 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1ACCTA2;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1', 'FINSA2'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1FINSA2 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1FINSA2;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider, Controls } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1', 'MARKA2'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1MARKA2 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1MARKA2;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1', 'INFSA2'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1INFSA2 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1INFSA2;","import React, {useState, useRef} from 'react';\r\nimport ReactFlow, { isNode, isEdge, ReactFlowProvider } from 'react-flow-renderer';\r\n\r\nimport CustomNode1 from '../../components/customnode1.js';\r\nimport CustomNode2 from '../../components/customnode2.js';\r\nimport HeaderNode1 from '../../components/headernode1.js';\r\n\r\nimport HoverInfo from '../../components/hoverinfo.js';\r\nimport hoverPrerequisites from '../../components/hoverprerequisites.js';\r\nimport unhoverPrerequisites from '../../components/unhoverprerequisites.js';\r\n\r\nimport { Grid, Segment, Container, Dropdown, Header, Checkbox } from 'semantic-ui-react'\r\nimport Sidebar from \"../../components/sidebar.js\"\r\n\r\nimport DegreePlanner from \"../../components/degreeplanner.js\"\r\nimport DropdownSearch from \"../../components/dropdownsearch.js\"\r\n\r\n// Initialisation helper functions\r\nimport dropdownSearchInit from '../../components/initialisation/dropdownSearchInit';\r\nimport selectableInit from '../../components/initialisation/selectableInit';\r\nimport hiddenInit from '../../components/initialisation/hiddenInit';\r\nimport additionalSearchInit from '../../components/initialisation/additionalSearchInit';\r\nimport coursesInit from '../../components/initialisation/coursesInit';\r\n\r\n// import positionHelper from '../../components/positionhelper.js';\r\nimport selectNode from '../../components/selectnode.js';\r\nimport unselectNode from '../../components/unselectnode.js';\r\nimport highlightElements from '../../components/highlightelements.js';\r\nimport getSelectable from '../../components/getselectable.js';\r\nimport checkPrerequisites from '../../components/checkprerequisites';\r\nimport exclusionSwap from '../../components/exclusionswap.js';\r\n\r\nimport unselectUnconnected from '../../components/unselectunconnected.js';\r\nimport coursesJSON from \"../../webscraper/courses.json\";\r\nimport dataJSON from \"./data.json\"\r\n\r\nconst specialisations = ['COMPA1', 'PSYCM2'];\r\nconst program = \"3778\";\r\nconst elementsData = dataJSON.slice();\r\n\r\n// Initialise dropdown search data\r\nvar searchNodeOptions = [];\r\ndropdownSearchInit(elementsData, specialisations, searchNodeOptions);\r\n\r\n// Initialise dropdown degree data\r\nvar searchAdditionalOptions = [];\r\nadditionalSearchInit(dataJSON, coursesJSON, searchAdditionalOptions);\r\n\r\nvar nodesData = elementsData.filter(e => isNode(e));\r\nvar edgesData = elementsData.filter(e => isEdge(e));\r\n\r\nvar selectedNodes = {};\r\nfor (const specialisation of specialisations) selectedNodes[specialisation] = 1;\r\n\r\nvar selectedEdges = {};\r\nvar selectableNodes = {};\r\nvar potentialEdges = {};\r\nvar hoverEdges = {};\r\nvar hiddenNodes = {};\r\nvar hiddenEdges = {};\r\n\r\n// Load up the chart with initial selectable nodes and edges\r\nselectableInit(elementsData, nodesData, selectedNodes, selectableNodes, potentialEdges);\r\n\r\n// Load up the chart with initial hidden nodes and edges\r\nvar exclusionGroups = require(\"./data_exclusion.json\");\r\nconst exclusionNodes = {};\r\nhiddenInit(elementsData, exclusionGroups, exclusionNodes, hiddenNodes, hiddenEdges);\r\n\r\n// Update coursesJSON with dataJSON data to be passed down to degree planner\r\nconst updatedCoursesJSON = coursesInit(coursesJSON, dataJSON);\r\n\r\nconst nodeTypes = {\r\n    custom1: CustomNode1,\r\n    custom2: CustomNode2,\r\n    header1: HeaderNode1\r\n};\r\n\r\nconst layoutStyle = {overflowX: \"hidden\", overflowY: \"overlay\", width: \"100vw\", height: \"100vh\"};\r\n\r\nconst ComputerScienceCOMPA1PSYCM2 = () => {\r\n    const [elements, setElements] = useState(elementsData);\r\n    const [hoverText, setHoverText] = useState(false);\r\n    const [hoverNode, setHoverNode] = useState();\r\n    const [layout, setLayout] = useState(layoutStyle);\r\n    const [additionalCourses, setAdditionalCourses] = useState([]);\r\n\r\n    var hideMap = useRef(true);\r\n\r\n    var clickCount = 0;\r\n    var singleClickTimer = '';\r\n\r\n    const onInstanceLoad = (instance) => {\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n        instance.setTransform({x: 500, y: 680, zoom: 1});\r\n    };\r\n\r\n    const selectUnselect = (element) => {\r\n        // Unhover edges which lit up on nodeMouseEnter\r\n        unhoverPrerequisites(hoverEdges);\r\n\r\n        // 1. Select the node and fill in edges.\r\n        // OR Unselects the nodes and unselects all nodes which depended on that node\r\n        if (selectableNodes.hasOwnProperty(element.id)) {\r\n            selectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        } else if (selectedNodes.hasOwnProperty(element.id)) {\r\n            unselectNode(elements, element, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n            unselectUnconnected(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n        }\r\n\r\n        // 2. Determine which nodes are now selectable\r\n        // - Determine which previously selectable nodes are now unselectable\r\n        getSelectable(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges);\r\n\r\n        // Render graph accordingly\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const toggleExclusion = (element) => {\r\n        // TODO: ARE there courses which do not \r\n        // For all immediate edges of the element, swap\r\n        // with the exclusion course\r\n        exclusionSwap(element, elements, edgesData, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, exclusionGroups);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n\r\n    const onElementClick = (event, element) => {\r\n        if (isEdge(element)) return; // Don't care about edges\r\n        if (specialisations.includes(element.id)) return; // Cannot click on main node\r\n        if ((! selectableNodes.hasOwnProperty(element.id)) && (! selectedNodes.hasOwnProperty(element.id))) return; // Cannot select non selectable nodes\r\n\r\n        // Determine double or single click for exclusion nodes\r\n        // This will prevent normal nodes from waiting the double click delay\r\n        if (exclusionNodes.hasOwnProperty(element.id)) {\r\n            clickCount++;\r\n            if (clickCount === 1) {\r\n                singleClickTimer = setTimeout(function() {\r\n                    clickCount = 0;\r\n                    selectUnselect(element);\r\n                }, 250);\r\n            } else if (clickCount === 2) {\r\n                clearTimeout(singleClickTimer);\r\n                clickCount = 0;\r\n                toggleExclusion(element);\r\n            }\r\n        } else {\r\n            // Not an exclusion node. Cannot be doubleclicked\r\n            selectUnselect(element);\r\n        }\r\n    };\r\n\r\n    const onNodeMouseEnter = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        // Display node information in top left\r\n        setHoverText(true);\r\n        setHoverNode(node);\r\n        hoverPrerequisites(node, elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    const onNodeMouseLeave = (event, node) => {\r\n        if (specialisations.includes(node.id)) return;\r\n        setHoverText(false);\r\n        unhoverPrerequisites(hoverEdges);\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    let hoverDisplay;\r\n    if (hoverText) {\r\n        hoverDisplay = <HoverInfo node={hoverNode}/>\r\n    }\r\n\r\n    const toggleHidden = () => {\r\n        hideMap.current = !hideMap.current;\r\n\r\n        setElements(highlightElements(elements, selectedNodes, selectedEdges, selectableNodes, potentialEdges, hoverEdges, hiddenNodes, hiddenEdges, hideMap.current));\r\n    }\r\n\r\n    // const onNodeDragStop = (event, node) => {\r\n    //     for (var e of elements) {\r\n    //         if (e.id === node.id) {\r\n    //             e.position.x = node.position.x;\r\n    //             e.position.y = node.position.y;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    const disableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'hidden'});\r\n    }\r\n\r\n    const enableBodyScroll = () => {\r\n        setLayout({...layout, overflowY: 'overlay'});\r\n    }\r\n\r\n    return (\r\n        <div style={{positon: \"relative\"}}>\r\n            <div style={layout}>\r\n                <Grid columns={2} divided>\r\n                    <Grid.Column width=\"12\">\r\n                        <ReactFlowProvider>\r\n                            <div onMouseEnter={disableBodyScroll} onMouseLeave={enableBodyScroll}>\r\n                                <ReactFlow\r\n                                    elements={elements}\r\n                                    style={{width: '100%', height: '95vh'}}\r\n                                    onLoad={onInstanceLoad}\r\n                                    nodeTypes={nodeTypes}\r\n                                    nodesConnectable={false}\r\n                                    onElementClick={onElementClick}\r\n                                    minZoom={0.38}\r\n                                    nodesDraggable={false}\r\n                                    onNodeMouseEnter={onNodeMouseEnter}\r\n                                    onNodeMouseLeave={onNodeMouseLeave}\r\n                                    selectNodesOnDrag={false}\r\n                                    // onNodeDragStop={onNodeDragStop}\r\n                                    elementsSelectable={false}\r\n                                >\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", bottom: \"20px\", left: \"20px\"}}>\r\n                                        <Checkbox\r\n                                            toggle\r\n                                            checked={!hideMap.current}\r\n                                            label=\"Show all courses\"\r\n                                            onChange={toggleHidden}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{position: \"absolute\", zIndex: \"10\", top: \"30px\", right: \"30px\"}}>\r\n                                        <DropdownSearch toggleExclusion={toggleExclusion} hideMap={hideMap.current} toggleHidden={toggleHidden} searchNodeOptions={searchNodeOptions} searchElements={elements}/>\r\n                                    </div>\r\n                                </ReactFlow>\r\n                            </div>\r\n                            <Container style={{marginBottom: \"50px\"}}>\r\n                                <Segment raised>\r\n                                    <Header as=\"h5\">Couldn't find a course up there? Add it here:</Header>\r\n                                    <Dropdown\r\n                                        selection\r\n                                        multiple\r\n                                        search\r\n                                        fluid\r\n                                        options={searchAdditionalOptions}\r\n                                        onChange={(e, data) => setAdditionalCourses(data.value)}\r\n                                        placeholder=\" courses\"\r\n                                    />\r\n                                </Segment>\r\n                            </Container>\r\n                        </ReactFlowProvider>\r\n                    </Grid.Column>\r\n                    <Grid.Column width=\"4\">\r\n                        <Sidebar specialisations={specialisations} selectedNodes={selectedNodes}/>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                {hoverDisplay}\r\n                {/* <button onClick={positionHelper(elements)}>GENERATE POSITION</button> */}\r\n                <div id=\"DegreePlanner\">\r\n                    <DegreePlanner\r\n                        key={Object.keys(selectedNodes).concat(additionalCourses).join(\"\")}\r\n                        program={program}\r\n                        specialisations={specialisations}\r\n                        selectedCourses={Object.keys(selectedNodes).concat(additionalCourses)}\r\n                        coursesJSON={updatedCoursesJSON}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComputerScienceCOMPA1PSYCM2;","import React, {Component} from 'react';\r\nimport { Route, HashRouter } from 'react-router-dom';\r\n\r\nimport BESengah from './maps/EngineeringHonoursSoftware/map.js';\r\nimport Homepage from \"./maps/Homepage/map.js\";\r\nimport ComputerScienceCOMPA1 from './maps/ComputerScienceCOMPA1/map.js';\r\nimport ComputerScienceCOMPA1ACCTA2 from './maps/ComputerScienceCOMPA1ACCTA2/map.js';\r\nimport ComputerScienceCOMPA1FINSA2 from './maps/ComputerScienceCOMPA1FINSA2/map.js';\r\nimport ComputerScienceCOMPA1MARKA2 from './maps/ComputerScienceCOMPA1MARKA2/map.js';\r\nimport ComputerScienceCOMPA1INFSA2 from './maps/ComputerScienceCOMPA1INFSA2/map.js';\r\nimport ComputerScienceCOMPA1PSYCM2 from './maps/ComputerScienceCOMPA1PSYCM2/map.js';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <HashRouter basename='/'>\r\n        <div>\r\n          <Route exact path=\"/3707/SENGAH\" component={BESengah} />\r\n          <Route exact path=\"/3778/COMPA1/\" component={ComputerScienceCOMPA1} />\r\n          <Route exact path=\"/3778/COMPA1/ACCTA2\" component={ComputerScienceCOMPA1ACCTA2} />\r\n          <Route exact path=\"/3778/COMPA1/FINSA2\" component={ComputerScienceCOMPA1FINSA2} />\r\n          <Route exact path=\"/3778/COMPA1/MARKA2\" component={ComputerScienceCOMPA1MARKA2} />\r\n          <Route exact path=\"/3778/COMPA1/INFSA2\" component={ComputerScienceCOMPA1INFSA2} />\r\n          <Route exact path=\"/3778/COMPA1/PSYCM2\" component={ComputerScienceCOMPA1PSYCM2} />\r\n          <Route exact path=\"/\" component={Homepage} />\r\n        </div>\r\n      </HashRouter>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType !== null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/refresh.5c376b6e.svg\";"],"sourceRoot":""}